{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 53fc8c3dd259e6ee44fe","webpack:///./lib/index.js","webpack:///./lib/core.js","webpack:///./lib/utils/style.js","webpack:///./~/free-style/dist/free-style.js","webpack:///./~/union-type/union-type.js","webpack:///./~/union-type/~/ramda/src/curryN.js","webpack:///./~/union-type/~/ramda/src/internal/_curry2.js","webpack:///./~/union-type/~/ramda/src/internal/_curry1.js","webpack:///./~/union-type/~/ramda/src/internal/_curryN.js","webpack:///./~/union-type/~/ramda/src/arity.js","webpack:///./~/ramda/src/clone.js","webpack:///./~/ramda/src/internal/_clone.js","webpack:///./~/ramda/src/internal/_cloneRegExp.js","webpack:///./~/ramda/src/type.js","webpack:///./~/ramda/src/internal/_curry1.js","webpack:///./lib/engine.js","webpack:///./~/flyd/lib/index.js","webpack:///./~/flyd/~/ramda/src/curryN.js","webpack:///./~/flyd/~/ramda/src/internal/_arity.js","webpack:///./~/flyd/~/ramda/src/internal/_curry1.js","webpack:///./~/flyd/~/ramda/src/internal/_isPlaceholder.js","webpack:///./~/flyd/~/ramda/src/internal/_curry2.js","webpack:///./~/flyd/~/ramda/src/internal/_curryN.js","webpack:///./lib/utils/logdiff.js","webpack:///./~/deep-diff/index.js","webpack:///./lib/utils/helpers.js","webpack:///./~/ramda/src/mapObjIndexed.js","webpack:///./~/ramda/src/internal/_curry2.js","webpack:///./~/ramda/src/internal/_reduce.js","webpack:///./~/ramda/src/internal/_xwrap.js","webpack:///./~/ramda/src/bind.js","webpack:///./~/ramda/src/internal/_arity.js","webpack:///./~/ramda/src/isArrayLike.js","webpack:///./~/ramda/src/internal/_isArray.js","webpack:///./~/ramda/src/keys.js","webpack:///./~/ramda/src/internal/_has.js","webpack:///./~/ramda/src/map.js","webpack:///./~/ramda/src/internal/_dispatchable.js","webpack:///./~/ramda/src/internal/_isTransformer.js","webpack:///./~/ramda/src/internal/_slice.js","webpack:///./~/ramda/src/internal/_map.js","webpack:///./~/ramda/src/internal/_xmap.js","webpack:///./~/ramda/src/internal/_xfBase.js","webpack:///./~/ramda/src/curryN.js","webpack:///./~/ramda/src/internal/_curryN.js","webpack:///./~/ramda/src/merge.js","webpack:///./~/ramda/src/equals.js","webpack:///./~/ramda/src/internal/_equals.js","webpack:///./~/ramda/src/internal/_arrayFromIterator.js","webpack:///./~/ramda/src/identical.js","webpack:///./lib/modules/timetravel.js","webpack:///./~/ramda/src/T.js","webpack:///./~/ramda/src/always.js","webpack:///./~/ramda/src/evolve.js","webpack:///./~/ramda/src/not.js","webpack:///./~/ramda/src/F.js","webpack:///./~/ramda/src/inc.js","webpack:///./~/ramda/src/add.js","webpack:///./~/ramda/src/ifElse.js","webpack:///./~/ramda/src/internal/_curry3.js","webpack:///./~/ramda/src/update.js","webpack:///./~/ramda/src/adjust.js","webpack:///./~/ramda/src/internal/_concat.js","webpack:///./~/ramda/src/append.js","webpack:///./~/snabbdom/h.js","webpack:///./~/snabbdom/vnode.js","webpack:///./~/snabbdom/is.js","webpack:///./~/ramda/src/pipe.js","webpack:///./~/ramda/src/internal/_pipe.js","webpack:///./~/ramda/src/reduce.js","webpack:///./~/ramda/src/tail.js","webpack:///./~/ramda/src/internal/_checkForMethod.js","webpack:///./~/ramda/src/slice.js","webpack:///./lib/service.js","webpack:///./lib/utils/data.js","webpack:///./~/ramda/src/curry.js","webpack:///./lib/modules/noChildren.js","webpack:///./lib/tasks/data.js","webpack:///./lib/tasks/value.js","webpack:///./lib/tasks/fetch.js","webpack:///./lib/tasks/emitter.js","webpack:///./lib/drivers/view.js","webpack:///./~/snabbdom/snabbdom.js","webpack:///./~/snabbdom/modules/class.js","webpack:///./~/snabbdom/modules/attributes.js","webpack:///./~/snabbdom/modules/props.js","webpack:///./~/snabbdom/modules/eventlisteners.js","webpack:///./~/snabbdom/modules/style.js","webpack:///./lib/drivers/event.js","webpack:///./lib/drivers/listenable.js","webpack:///./lib/drivers/load.js","webpack:///./lib/drivers/time.js","webpack:///./lib/drivers/localStorage.js","webpack:///./lib/drivers/screenInfo.js","webpack:///./lib/utils/screenInfo.js"],"names":["require","default","h","flyd","timetravel","service","noChildren","tasks","data","value","fetch","emitter","drivers","view","event","listenable","load","time","localStorage","screenInfo","style","R","clone","def","mDef","moduleDef","name","hasOwnProperty","log","logAll","ns","animation","styles","styleInstance","createStyle","animations","registerAnimations","rs","dispose","Style","remove","container","actions","Action","update","actionName","caseOn","inputs","_action","ctx","length","outputNames","loadAfter","i","md","FreeStyle","document","getElementById","createStylesContainer","target","id","createElement","appendChild","head","createModuleStylesContainer","scope","console","warn","namespace","create","stringHash","s","setNamespace","r","styleName","styleObj","classHash","registerStyle","hasBaseObject","obj","key","moduleName","stylesObj","rs_func","classObj","inject","animationsObj","registerKeyframes","noSelectable","absoluteCenter","display","alignItems","justifyContent","__extends","d","b","p","__","constructor","prototype","Object","instanceId","CSS_NUMBER","VENDOR_PREFIXES","_i","_a","keys","property","_b","prefix","hyphenate","propertyName","replace","toLowerCase","isAtRule","charAt","isNestedStyle","Array","isArray","str","charCodeAt","toString","exports","styleStringToString","String","styleToString","map","join","sortTuples","sort","a","parseUserStyles","hasNestedStyles","properties","nestedStyles","push","trim","stringifyProperties","interpolate","selector","parent","indexOf","collectHashedStyles","instances","hashString","stylize","styleString","add","hash","name_1","Rule","undefined","registerUserStyles","currentClassName","currentSelector","Selector","registerUserRule","TypeError","rule","name_2","registerUserHashedRule","bucket","Cache","currentIdentifier","atRule","merge","getStyles","values","_this","_children","_keys","_counts","_listeners","_mergeListener","type","path","finalItem","pop","item","cacheItem","get","_childListener","emitChange","concat","x","empty","len","count","splice","getIdentifier","addChangeListener","removeChangeListener","fn","listeners","index","listener","unmerge","identifier","_super","call","url","encodeURI","classList","arguments","classNames","apply","_c","registerRule","keyframes","node","innerHTML","curryN","isString","isNumber","n","isObject","isFunction","f","mapConstrToFn","group","constr","Number","Function","Constructor","validators","val","v","validator","of","rawCase","cases","action","arg","Error","typeCase","Type","desc","case","module","_curry2","_curryN","arity","_curry1","f2","f1","received","combined","argsIdx","left","combinedIdx","result","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","_clone","_cloneRegExp","refFrom","refTo","copy","copiedValue","idx","Date","pattern","RegExp","source","global","ignoreCase","multiline","sticky","unicode","slice","pipe","equals","run","model$","driverStreams","middleUpdatesArr","middleware","engineDef","middleUpdates","m","root","attach","createContext","newModel","_initial","_log","_moduleName","actionInfo","scan","addModuleInfo","model","init","action$","serviceName","services","taskName","driverName","on","task","t","task$","interfaces","reattach","disposeConnections","end","reModule","trueFn","toUpdate","inStream","order","orderNextIdx","flushing","stream","initialValue","endStream","createDependentStream","createStream","fnArgs","combine","streams","deps","depEndStreams","depsChanged","addListeners","updateStream","isStream","immediate","depsMet","endsOn","endS","detachDeps","self","acc","hasVal","s1","s2","changed","transduce","xform","StreamTransformer","res","boundMap","ap","streamToString","updateStreamValue","vals","queued","shouldUpdate","initialDepsNotMet","every","returnVal","flushUpdate","updateDeps","o","list","findDeps","shift","then","markListeners","lists","removeListener","_arity","_isPlaceholder","prettyAction","prettyActionDetailed","actionModuleInfo","prettyParams","prettyDiff","logAction","displayFromDiff","diff","modulePath","lastAction","nested","_logAll","params","paramString","param","diffArray","logs","forEach","getType","kind","lhs","rhs","factory","define","DeepDiff","$scope","conflict","conflictResolution","window","accumulateDiff","inherits","ctor","superCtor","super_","enumerable","writable","configurable","Diff","defineProperty","DiffEdit","origin","DiffNew","DiffDeleted","DiffArray","arrayRemove","arr","from","to","rest","realTypeOf","subject","Math","test","deepDiff","changes","prefilter","stack","currentPath","normalize","alt","ltype","rtype","akeys","pkeys","k","other","isNaN","accum","applyArrayChange","change","it","u","applyChange","last","revertArrayChange","revertChange","applyDiff","filter","onChange","defineProperties","observableDiff","isConflict","noConflict","mapObjIndexed","connectInterface","connections","mergeModels","mds","mergeChilds","childs","interfaceName","objs","mergeChild","mDefinition","_md","_dynamicMd","connectTasks","subName","setTimeout","mergeChildList","rootModel","childNames","mapObjToArray","setDynamicMds","ctxArray","_reduce","_xwrap","bind","isArrayLike","_arrayReduce","xf","_iterableReduce","iter","step","next","done","_methodReduce","reduce","symIterator","Symbol","iterator","XWrap","thisObj","_isArray","nodeType","_has","hasEnumBug","propertyIsEnumerable","nonEnumerableProps","contains","prop","ks","nIdx","_dispatchable","_map","_xmap","functor","_isTransformer","_slice","methodname","args","transducer","max","min","_xfBase","XMap","input","_equals","_arrayFromIterator","identical","stackA","stackB","valueOf","entries","keysA","T","evolve","not","always","F","inc","ifElse","append","child","active","playing","frameTime","opened","state","history","timestamp","getTime","toggleTimeTravel","_","ToggleTimeTravel","setTime","SetTime","childAction","ChildAction","setActive","bool","SetActive","clearHistory","ClearHistory","play","Play","frame","Frame","validTime","nextState","evolveFn","width","height","overflow","toggleButton","click","base","controls","button","slider","props","parseInt","ev","timer","periodic","timers","fetches","position","minHeight","bottom","zIndex","flexWrap","float","transformations","object","transformation","_curry3","condition","onTrue","onFalse","_ifElse","f3","c","adjust","_concat","start","_idx","_list","set1","set2","len1","len2","el","VNode","is","addNS","children","sel","text","array","primitive","elm","_pipe","tail","g","_checkForMethod","Infinity","fromIndex","toIndex","curry","defObj","isQueued","queue","serverName","store","eventQueue","Proxy","set","notify","subscribers","events","emit","cbObj","connected","connect","subscriber","parts","split","notifyAll","subscribeAll","subs","_tasks","_drivers","connectionInfo","success","promises","Promise","resolve","reject","all","fetchObj","handled","status","response","error","statusText","options","catch","err","fetchAll","promiseArray","types","emitData","taskFn","send","sendValue","emt","channel","message","patch","patchfn","lastContainer","renderer$","vnode$","addEventListener","querySelector","vnode","isUndef","isDef","emptyNodeAt","tagName","emptyNode","sameVnode","vnode1","vnode2","createKeyToOldIdx","beginIdx","endIdx","createRmCb","childElm","parentElement","removeChild","hooks","modules","j","cbs","createElm","insertedVnodeQueue","hook","hashIdx","dotIdx","dot","tag","createElementNS","className","createTextNode","insert","addVnodes","parentElm","before","vnodes","startIdx","insertBefore","invokeDestroyHook","destroy","removeVnodes","rm","ch","updateChildren","oldCh","newCh","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","oldKeyToIdx","idxInOld","elmToMove","patchVnode","nextSibling","oldVnode","prepatch","textContent","postpatch","pre","Element","replaceChild","post","updateClass","cur","oldClass","class","klass","booleanAttrs","booleanAttrsDict","updateAttrs","old","oldAttrs","attrs","removeAttribute","setAttribute","updateProps","oldProps","arrInvoker","fnInvoker","updateEventListeners","oldOn","raf","requestAnimationFrame","nextFrame","setNextFrame","updateStyle","oldStyle","oldHasDel","delayed","applyDestroyStyle","applyRemoveStyle","maxDur","compStyle","amount","applied","getComputedStyle","cb","listener$","event$","l","removeAllListeners","setSubscribers","setListeners","listenerName","listenerArr","stateNames","timerPatch","timeData","setInterval","clearInterval","clearTimeout","timerListPatch","lastList","time$","data$","setItem","JSON","stringify","removeItem","screenInfoDriver","screenListener","screen$","info","removeEventListener","screenSize","innerWidth","body","clientWidth","innerHeight","clientHeight","size","isLandscape","isPortrait"],"mappings":"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","file":"fractal.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"fractal\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fractal\"] = factory();\n\telse\n\t\troot[\"fractal\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 53fc8c3dd259e6ee44fe\n **/","'use strict'\n\nexport default {\n  ...require('./core').default,\n  ...require('./engine').default,\n  h: require('snabbdom/h'),\n  flyd: require('flyd'),\n  timetravel: require('./modules/timetravel').default,\n  // router: require('./router').default,\n  service: require('./service').default,\n  noChildren: require('./modules/noChildren').default,\n  tasks: {\n    data: require('./tasks/data').default,\n    value: require('./tasks/value').default,\n    fetch: require('./tasks/fetch').default,\n    emitter: require('./tasks/emitter').default,\n  },\n  drivers: {\n    view: require('./drivers/view').default,\n    event: require('./drivers/event').default,\n    listenable: require('./drivers/listenable').default,\n    load: require('./drivers/load').default,\n    time: require('./drivers/time').default, // NEEDS REVIEW!! (maybe depreecated.default)\n    localStorage: require('./drivers/localStorage').default,\n    screenInfo: require('./drivers/screenInfo').default,\n  },\n  ...require('./utils/helpers').default,\n  data: require('./utils/data').default,\n  style: require('./utils/style').default,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/index.js\n **/","import style from './utils/style'\nimport Type from 'union-type'\n\nconst R = {\n  clone: require('ramda/src/clone'),\n}\n\n\nlet def = moduleDef => {\n  let mDef = R.clone(moduleDef)\n  mDef.name = (mDef.hasOwnProperty('name')) ? mDef.name : 'UnamedModule'\n  mDef.log = (mDef.hasOwnProperty('log')) ? mDef.log : false\n  mDef.logAll = (mDef.hasOwnProperty('logAll')) ? mDef.logAll : false\n\n  // 'ns' is the namespace for keyFrames and may be other stuff\n  let ns = { animation: {} }\n  if (mDef.styles) {\n    mDef.styleInstance = style.createStyle(style.styles, mDef.name)\n  }\n  if (mDef.animations) {\n    ns.animations = style.registerAnimations(mDef.name, mDef.styleInstance, mDef.animations)\n  }\n  if (mDef.styles) {\n    mDef.styles = style.rs(mDef.name, mDef.styleInstance, (typeof(mDef.styles) === 'function') ? mDef.styles(ns) : mDef.styles)\n    mDef.dispose = () => {\n      mDef.styleInstance.Style.remove(mDef.styleInstance.Style)\n      mDef.styleInstance.container.remove()\n    }\n  } else {\n    mDef.styles = {}\n    mDef.dispose = () => 0\n  }\n\n  if (mDef.actions) {\n    mDef.Action = {}\n    mDef.update = {}\n    for (let actionName in mDef.actions) {\n      mDef.Action[actionName] = mDef.actions[actionName][0]\n      mDef.update[actionName] = mDef.actions[actionName][1]\n    }\n  }\n  mDef.Action = Type(mDef.Action)\n  mDef.update = mDef.Action.caseOn(mDef.update)\n  if (!mDef.inputs) {\n    mDef.inputs = {}\n  }\n  mDef.inputs._action = (ctx, Action, name, data) => (Action[name].length > 0) ? Action[name](data) : Action[name]()\n  if (!mDef.outputNames) {\n    mDef.outputNames = []\n  }\n  if (!mDef.load) {\n    mDef.load = (ctx, Action) => ({})\n  }\n  if (!mDef.loadAfter) {\n    mDef.loadAfter = (ctx, i, Action, md) => md({})\n  }\n  mDef.mDef = moduleDef\n  return mDef\n}\n\nexport default {\n  def,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core.js\n **/","// A set of css useful function helpers\nconst FreeStyle = require('free-style')\n\n// the div element for injecting styles\nlet styles = document.getElementById('F-app-styles')\n\nfunction createStylesContainer(target, id) {\n  let styles = document.createElement('div')\n  styles.id = id\n  target.appendChild(styles)\n  return styles\n}\n\nif (!styles) {\n  styles = createStylesContainer(document.head, 'F-app-styles')\n}\n\nfunction createModuleStylesContainer(styles, name, scope = '') {\n  let container = document.createElement('div')\n  if (document.getElementById('fractalModuleStyles-' + scope + name)) {\n    console.warn('WARNING!!! there are a duplicated module definition name!!: ' + scope + name)\n  }\n  container.id = scope + name\n  styles.appendChild(container)\n  return container\n}\n\nfunction createStyle(styles, name, scope = '') {\n  let namespace = ''\n  return {\n    Style: FreeStyle.create(s => `-${namespace}--${FreeStyle.stringHash(s)}`),\n    container: createModuleStylesContainer(styles, name, scope),\n    setNamespace: ns => namespace = ns,\n  }\n}\n\n\nfunction r(styleInstance, styleName, styleObj) {\n  styleInstance.setNamespace(styleName)\n  let classHash = styleInstance.Style.registerStyle(styleObj)\n  return classHash\n}\n\nfunction hasBaseObject(obj) {\n  for (let key in obj) {\n    if (obj[key] !== null && typeof obj[key] === 'object' && key == 'base') {\n      return true\n    }\n  }\n  return false\n}\n\nfunction rs(moduleName, styleInstance, stylesObj) {\n  function rs_func(styleName, stylesObj) {\n    if (!hasBaseObject(stylesObj)) {\n      return r(styleInstance, styleName, stylesObj)\n    }\n    let classObj = {}\n    for (let key in stylesObj) {\n      if (hasBaseObject(stylesObj[key])) {\n        classObj[key] = rs_func(`${styleName}-${key}`, stylesObj[key])\n      } else if (stylesObj[key] != null && typeof stylesObj[key] === 'object') {\n        classObj[key] = r(styleInstance, styleName, stylesObj[key])\n      } else { // function\n        classObj[key] = stylesObj[key]\n      }\n    }\n    return classObj\n  }\n\n  let classObj = rs_func(moduleName, stylesObj)\n\n  styleInstance.Style.inject(styleInstance.container)\n\n  return classObj\n}\n\nfunction registerAnimations(moduleName, styleInstance, animationsObj) {\n  let animations = {}\n  for (let key in animationsObj) {\n    styleInstance.setNamespace(`${moduleName}-${key}`)\n    animations[key] = styleInstance.Style.registerKeyframes(animationsObj[key])\n  }\n  return animations\n}\n\nlet noSelectable = {\n  '-webkit-touch-callout': 'none', /* iOS Safari */\n  '-webkit-user-select': 'none',   /* Chrome/Safari/Opera */\n  '-khtml-user-select': 'none',    /* Konqueror */\n  '-moz-user-select': 'none',      /* Firefox */\n  '-ms-user-select': 'none',       /* Internet Explorer/Edge */\n  'user-select': 'none',\n}\n\nlet absoluteCenter = {\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n}\n\nexport default {\n  styles,\n  r,\n  rs,\n  registerAnimations,\n  createStyle,\n  createStylesContainer,\n  createModuleStylesContainer,\n  hasBaseObject,\n  // helpers\n  absoluteCenter,\n  noSelectable,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils/style.js\n **/","var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * Increment through IDs for FreeStyle, which can't generate hashed IDs.\n */\nvar instanceId = 0;\n/**\n * CSS properties that are valid unit-less numbers.\n */\nvar CSS_NUMBER = {\n    'box-flex': true,\n    'box-flex-group': true,\n    'column-count': true,\n    'flex': true,\n    'flex-grow': true,\n    'flex-positive': true,\n    'flex-shrink': true,\n    'flex-negative': true,\n    'font-weight': true,\n    'line-clamp': true,\n    'line-height': true,\n    'opacity': true,\n    'order': true,\n    'orphans': true,\n    'tab-size': true,\n    'widows': true,\n    'z-index': true,\n    'zoom': true,\n    // SVG properties.\n    'fill-opacity': true,\n    'stroke-dashoffset': true,\n    'stroke-opacity': true,\n    'stroke-width': true\n};\n/**\n * CSS vendor prefixes.\n */\nvar VENDOR_PREFIXES = ['-webkit-', '-ms-', '-moz-', '-o-'];\n// Add vendor prefixes to all unit-less properties.\nfor (var _i = 0, _a = Object.keys(CSS_NUMBER); _i < _a.length; _i++) {\n    var property = _a[_i];\n    for (var _b = 0; _b < VENDOR_PREFIXES.length; _b++) {\n        var prefix = VENDOR_PREFIXES[_b];\n        CSS_NUMBER[prefix + property] = true;\n    }\n}\n/**\n * Transform a JavaScript property into a CSS property.\n */\nfunction hyphenate(propertyName) {\n    return propertyName\n        .replace(/([A-Z])/g, '-$1')\n        .replace(/^ms-/, '-ms-') // Internet Explorer vendor prefix.\n        .toLowerCase();\n}\n/**\n * Check if a property name should pop to the top level of CSS.\n */\nfunction isAtRule(propertyName) {\n    return propertyName.charAt(0) === '@';\n}\n/**\n * Check if a value is a nested style definition.\n */\nfunction isNestedStyle(value) {\n    return value != null && typeof value === 'object' && !Array.isArray(value);\n}\n/**\n * Generate a hash value from a string.\n */\nfunction stringHash(str) {\n    var value = 5381;\n    var i = str.length;\n    while (i) {\n        value = (value * 33) ^ str.charCodeAt(--i);\n    }\n    return (value >>> 0).toString(36);\n}\nexports.stringHash = stringHash;\n/**\n * Transform a style string to a CSS string.\n */\nfunction styleStringToString(name, value) {\n    if (value == null) {\n        return '';\n    }\n    if (typeof value === 'number' && value !== 0 && !CSS_NUMBER[name]) {\n        value += 'px';\n    }\n    return name + \":\" + String(value).replace(/([\\{\\}\\[\\]])/g, '\\\\$1');\n}\n/**\n * Transform a style into a CSS string.\n */\nfunction styleToString(name, value) {\n    if (Array.isArray(value)) {\n        return value.map(function (value) {\n            return styleStringToString(name, value);\n        }).join(';');\n    }\n    return styleStringToString(name, value);\n}\n/**\n * Sort an array of tuples by first value.\n */\nfunction sortTuples(value) {\n    return value.sort(function (a, b) { return a[0] > b[0] ? 1 : -1; });\n}\n/**\n * Categorize user styles.\n */\nfunction parseUserStyles(styles, hasNestedStyles) {\n    var properties = [];\n    var nestedStyles = [];\n    // Sort keys before adding to styles.\n    for (var _i = 0, _a = Object.keys(styles); _i < _a.length; _i++) {\n        var key = _a[_i];\n        var value = styles[key];\n        if (isNestedStyle(value)) {\n            nestedStyles.push([key.trim(), value]);\n        }\n        else {\n            properties.push([hyphenate(key.trim()), value]);\n        }\n    }\n    return {\n        properties: sortTuples(properties),\n        nestedStyles: hasNestedStyles ? nestedStyles : sortTuples(nestedStyles)\n    };\n}\n/**\n * Stringify an array of property tuples.\n */\nfunction stringifyProperties(properties) {\n    return properties.map(function (p) { return styleToString(p[0], p[1]); }).join(';');\n}\n/**\n * Interpolate CSS selectors.\n */\nfunction interpolate(selector, parent) {\n    if (selector.indexOf('&') > -1) {\n        return selector.replace(/&/g, parent);\n    }\n    return parent + \" \" + selector;\n}\n/**\n * Register all styles, but collect for post-selector correction using the hash.\n */\nfunction collectHashedStyles(container, styles, hasNestedStyles) {\n    var instances = [];\n    var hashString = '';\n    function stylize(container, styles, selector) {\n        var _a = parseUserStyles(styles, hasNestedStyles), properties = _a.properties, nestedStyles = _a.nestedStyles;\n        var styleString = stringifyProperties(properties);\n        var style = container.add(new Style(styleString, container.hash));\n        hashString += styleString;\n        instances.push([selector, style]);\n        for (var _i = 0; _i < nestedStyles.length; _i++) {\n            var _b = nestedStyles[_i], name_1 = _b[0], value = _b[1];\n            hashString += name_1;\n            if (isAtRule(name_1)) {\n                stylize(container.add(new Rule(name_1, undefined, container.hash)), value, selector);\n            }\n            else {\n                stylize(container, value, hasNestedStyles ? interpolate(name_1, selector) : name_1);\n            }\n        }\n    }\n    stylize(container, styles, '&');\n    return { hashString: hashString, instances: instances };\n}\n/**\n * Recursively register styles on a container instance.\n */\nfunction registerUserStyles(container, styles) {\n    var _a = collectHashedStyles(container, styles, true), hashString = _a.hashString, instances = _a.instances;\n    var currentClassName = \"f\" + container.hash(hashString);\n    var currentSelector = \".\" + currentClassName;\n    for (var _i = 0; _i < instances.length; _i++) {\n        var _b = instances[_i], selector = _b[0], style = _b[1];\n        style.add(new Selector(interpolate(selector, currentSelector), style.hash, undefined, hashString));\n    }\n    return currentClassName;\n}\n/**\n * Create user rule. Simplified collect styles, since it doesn't need hashing.\n */\nfunction registerUserRule(container, selector, styles) {\n    var _a = parseUserStyles(styles, false), properties = _a.properties, nestedStyles = _a.nestedStyles;\n    // Throw when using properties and nested styles together in rule.\n    if (properties.length && nestedStyles.length) {\n        throw new TypeError(\"Registering a CSS rule can not use properties with nested styles\");\n    }\n    var styleString = stringifyProperties(properties);\n    var rule = container.add(new Rule(selector, styleString, container.hash));\n    for (var _i = 0; _i < nestedStyles.length; _i++) {\n        var _b = nestedStyles[_i], name_2 = _b[0], value = _b[1];\n        registerUserRule(rule, name_2, value);\n    }\n}\n/**\n * Parse and register keyframes on the current instance.\n */\nfunction registerUserHashedRule(container, selector, styles) {\n    var bucket = new Cache(container.hash);\n    var _a = collectHashedStyles(bucket, styles, false), hashString = _a.hashString, instances = _a.instances;\n    for (var _i = 0; _i < instances.length; _i++) {\n        var _b = instances[_i], rule = _b[0], style = _b[1];\n        style.add(new Selector(rule, style.hash, undefined, hashString));\n    }\n    var currentIdentifier = \"h\" + container.hash(hashString);\n    var atRule = container.add(new Rule(\"@\" + selector + \" \" + currentIdentifier, undefined, container.hash, undefined, hashString));\n    atRule.merge(bucket);\n    return currentIdentifier;\n}\n/**\n * Get the styles string for a container class.\n */\nfunction getStyles(container) {\n    return container.values().map(function (style) { return style.getStyles(); }).join('');\n}\n/**\n * Implement a cache/event emitter.\n */\nvar Cache = (function () {\n    function Cache(hash) {\n        var _this = this;\n        if (hash === void 0) { hash = stringHash; }\n        this.hash = hash;\n        this._children = {};\n        this._keys = [];\n        this._counts = {};\n        this._listeners = [];\n        this._mergeListener = function (type, path) {\n            var finalItem = path.pop();\n            var item = _this;\n            for (var _i = 0; _i < path.length; _i++) {\n                var cacheItem = path[_i];\n                item = _this.get(cacheItem);\n            }\n            return type === 'add' ? item.add(finalItem) : _this.remove(finalItem);\n        };\n        this._childListener = function (type, path, parent) {\n            _this.emitChange(type, [parent].concat(path));\n        };\n    }\n    Cache.prototype.values = function () {\n        var _this = this;\n        return this._keys.map(function (x) { return _this._children[x]; });\n    };\n    Cache.prototype.empty = function () {\n        for (var _i = 0, _a = this._keys; _i < _a.length; _i++) {\n            var key = _a[_i];\n            var item = this._children[key];\n            var len = this.count(item);\n            while (len--) {\n                this.remove(item);\n            }\n        }\n    };\n    Cache.prototype.add = function (style) {\n        var count = this._counts[style.id] || 0;\n        var item = this._children[style.id];\n        this._counts[style.id] = count + 1;\n        if (count === 0) {\n            item = style.clone();\n            this._keys.push(item.id);\n            this._children[item.id] = item;\n            this.emitChange('add', [item]);\n        }\n        else {\n            this._keys.splice(this._keys.indexOf(style.id), 1);\n            this._keys.push(style.id);\n            // Check if contents are different.\n            if (item.getIdentifier() !== style.getIdentifier()) {\n                throw new TypeError(\"Hash collision: \" + style.getStyles() + \" === \" + item.getStyles());\n            }\n        }\n        if (style instanceof Cache) {\n            if (count === 0) {\n                item.addChangeListener(this._childListener);\n            }\n            for (var _i = 0, _a = style.values(); _i < _a.length; _i++) {\n                var cacheItem = _a[_i];\n                item.add(cacheItem);\n            }\n        }\n        return item;\n    };\n    Cache.prototype.get = function (style) {\n        return this._children[style.id];\n    };\n    Cache.prototype.count = function (style) {\n        return this._counts[style.id] || 0;\n    };\n    Cache.prototype.remove = function (style) {\n        var count = this._counts[style.id];\n        if (count > 0) {\n            this._counts[style.id] = count - 1;\n            var item = this._children[style.id];\n            if (count === 1) {\n                delete this._counts[style.id];\n                delete this._children[style.id];\n                this._keys.splice(this._keys.indexOf(style.id), 1);\n                this.emitChange('remove', [style]);\n            }\n            if (style instanceof Cache) {\n                if (count === 1) {\n                    item.removeChangeListener(this._childListener);\n                }\n                for (var _i = 0, _a = style.values(); _i < _a.length; _i++) {\n                    var cacheItem = _a[_i];\n                    item.remove(cacheItem);\n                }\n            }\n        }\n    };\n    Cache.prototype.addChangeListener = function (fn) {\n        this._listeners.push(fn);\n    };\n    Cache.prototype.removeChangeListener = function (fn) {\n        var listeners = this._listeners;\n        var index = listeners.indexOf(fn);\n        if (index > -1) {\n            listeners.splice(index, 1);\n        }\n    };\n    Cache.prototype.emitChange = function (type, path) {\n        for (var _i = 0, _a = this._listeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener(type, path, this);\n        }\n    };\n    Cache.prototype.merge = function (style) {\n        for (var _i = 0, _a = style.values(); _i < _a.length; _i++) {\n            var cacheItem = _a[_i];\n            this.add(cacheItem);\n        }\n        style.addChangeListener(this._mergeListener);\n    };\n    Cache.prototype.unmerge = function (style) {\n        for (var _i = 0, _a = style.values(); _i < _a.length; _i++) {\n            var cacheItem = _a[_i];\n            this.remove(cacheItem);\n        }\n        style.removeChangeListener(this._mergeListener);\n    };\n    return Cache;\n})();\nexports.Cache = Cache;\n/**\n * Selector is a dumb class made to represent nested CSS selectors.\n */\nvar Selector = (function () {\n    function Selector(selector, hash, id, identifier) {\n        if (hash === void 0) { hash = stringHash; }\n        if (id === void 0) { id = \"s\" + hash(selector); }\n        if (identifier === void 0) { identifier = ''; }\n        this.selector = selector;\n        this.hash = hash;\n        this.id = id;\n        this.identifier = identifier;\n    }\n    Selector.prototype.getStyles = function () {\n        return this.selector;\n    };\n    Selector.prototype.getIdentifier = function () {\n        return this.identifier + \"_\" + this.selector;\n    };\n    Selector.prototype.clone = function () {\n        return new Selector(this.selector, this.hash, this.id, this.identifier);\n    };\n    return Selector;\n})();\nexports.Selector = Selector;\n/**\n * The style container registers a style string with selectors.\n */\nvar Style = (function (_super) {\n    __extends(Style, _super);\n    function Style(style, hash, id) {\n        if (hash === void 0) { hash = stringHash; }\n        if (id === void 0) { id = \"c\" + hash(style); }\n        _super.call(this);\n        this.style = style;\n        this.hash = hash;\n        this.id = id;\n    }\n    Style.prototype.getStyles = function () {\n        return this.style ? this.values().map(function (x) { return x.selector; }).join(',') + \"{\" + this.style + \"}\" : '';\n    };\n    Style.prototype.getIdentifier = function () {\n        return this.style;\n    };\n    Style.prototype.clone = function () {\n        return new Style(this.style, this.hash, this.id);\n    };\n    return Style;\n})(Cache);\nexports.Style = Style;\n/**\n * Implement rule logic for style output.\n */\nvar Rule = (function (_super) {\n    __extends(Rule, _super);\n    function Rule(rule, style, hash, id, identifier) {\n        if (style === void 0) { style = ''; }\n        if (hash === void 0) { hash = stringHash; }\n        if (id === void 0) { id = \"a\" + hash(rule + style); }\n        if (identifier === void 0) { identifier = ''; }\n        _super.call(this);\n        this.rule = rule;\n        this.style = style;\n        this.hash = hash;\n        this.id = id;\n        this.identifier = identifier;\n    }\n    Rule.prototype.getStyles = function () {\n        return this.rule + \"{\" + this.style + getStyles(this) + \"}\";\n    };\n    Rule.prototype.getIdentifier = function () {\n        return this.identifier + \"_\" + this.rule + \"_\" + this.style;\n    };\n    Rule.prototype.clone = function () {\n        return new Rule(this.rule, this.style, this.hash, this.id, this.identifier);\n    };\n    return Rule;\n})(Cache);\nexports.Rule = Rule;\n/**\n * The FreeStyle class implements the API for everything else.\n */\nvar FreeStyle = (function (_super) {\n    __extends(FreeStyle, _super);\n    function FreeStyle(hash, id) {\n        if (hash === void 0) { hash = stringHash; }\n        if (id === void 0) { id = \"f\" + (++instanceId).toString(36); }\n        _super.call(this, hash);\n        this.hash = hash;\n        this.id = id;\n    }\n    FreeStyle.prototype.url = function (url) {\n        return 'url(\"' + encodeURI(url) + '\")';\n    };\n    FreeStyle.prototype.join = function () {\n        var classList = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            classList[_i - 0] = arguments[_i];\n        }\n        var classNames = [];\n        for (var _a = 0; _a < classList.length; _a++) {\n            var value = classList[_a];\n            if (typeof value === 'string') {\n                classNames.push(value);\n            }\n            else if (Array.isArray(value)) {\n                classNames.push(this.join.apply(this, value));\n            }\n            else if (value != null) {\n                for (var _b = 0, _c = Object.keys(value); _b < _c.length; _b++) {\n                    var key = _c[_b];\n                    if (value[key]) {\n                        classNames.push(key);\n                    }\n                }\n            }\n        }\n        return classNames.join(' ');\n    };\n    FreeStyle.prototype.registerStyle = function (styles) {\n        return registerUserStyles(this, styles);\n    };\n    FreeStyle.prototype.registerRule = function (rule, styles) {\n        return registerUserRule(this, rule, styles);\n    };\n    FreeStyle.prototype.registerKeyframes = function (keyframes) {\n        return registerUserHashedRule(this, 'keyframes', keyframes);\n    };\n    /* istanbul ignore next */\n    FreeStyle.prototype.inject = function (target) {\n        target = target || document.head;\n        var node = document.createElement('style');\n        node.innerHTML = this.getStyles();\n        target.appendChild(node);\n        return node;\n    };\n    FreeStyle.prototype.getStyles = function () {\n        return getStyles(this);\n    };\n    FreeStyle.prototype.getIdentifier = function () {\n        return this.id;\n    };\n    FreeStyle.prototype.clone = function () {\n        return new FreeStyle(this.hash, this.id);\n    };\n    return FreeStyle;\n})(Cache);\nexports.FreeStyle = FreeStyle;\n/**\n * Exports a simple function to create a new instance.\n */\nfunction create(hash) {\n    return new FreeStyle(hash);\n}\nexports.create = create;\n//# sourceMappingURL=free-style.js.map\n\n\n/** WEBPACK FOOTER **\n ** ./~/free-style/dist/free-style.js\n **/","var curryN = require('ramda/src/curryN');\n\nfunction isString(s) { return typeof s === 'string'; }\nfunction isNumber(n) { return typeof n === 'number'; }\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\nfunction isFunction(f) { return typeof f === 'function'; }\nvar isArray = Array.isArray || function(a) { return 'length' in a; };\n\nvar mapConstrToFn = curryN(2, function(group, constr) {\n  return constr === String    ? isString\n       : constr === Number    ? isNumber\n       : constr === Object    ? isObject\n       : constr === Array     ? isArray\n       : constr === Function  ? isFunction\n       : constr === undefined ? group\n                              : constr;\n});\n\nfunction Constructor(group, name, validators) {\n  validators = validators.map(mapConstrToFn(group));\n  var constructor = curryN(validators.length, function() {\n    var val = [], v, validator;\n    for (var i = 0; i < arguments.length; ++i) {\n      v = arguments[i];\n      validator = validators[i];\n      if ((typeof validator === 'function' && validator(v)) ||\n          (v !== undefined && v !== null && v.of === validator)) {\n        val[i] = arguments[i];\n      } else {\n        throw new TypeError('wrong value ' + v + ' passed to location ' + i + ' in ' + name);\n      }\n    }\n    val.of = group;\n    val.name = name;\n    return val;\n  });\n  return constructor;\n}\n\nfunction rawCase(type, cases, action, arg) {\n  if (type !== action.of) throw new TypeError('wrong type passed to case');\n  var name = action.name in cases ? action.name\n           : '_' in cases         ? '_'\n                                  : undefined;\n  if (name === undefined) {\n    throw new Error('unhandled value passed to case');\n  } else {\n    return cases[name].apply(undefined, arg !== undefined ? action.concat([arg]) : action);\n  }\n}\n\nvar typeCase = curryN(3, rawCase);\nvar caseOn = curryN(4, rawCase);\n\nfunction Type(desc) {\n  var obj = {};\n  for (var key in desc) {\n    obj[key] = Constructor(obj, key, desc[key]);\n  }\n  obj.case = typeCase(obj);\n  obj.caseOn = caseOn(obj);\n  return obj;\n}\n\nmodule.exports = Type;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/union-type/union-type.js\n **/","var _curry2 = require('./internal/_curry2');\nvar _curryN = require('./internal/_curryN');\nvar arity = require('./arity');\n\n\n/**\n * Returns a curried equivalent of the provided function, with the\n * specified arity. The curried function has two unusual capabilities.\n * First, its arguments needn't be provided one at a time. If `g` is\n * `R.curryN(3, f)`, the following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value `R.__` may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is `R.__`,\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      var addFourNumbers = function() {\n *        return R.sum([].slice.call(arguments, 0, 4));\n *      };\n *\n *      var curriedAddFourNumbers = R.curryN(4, addFourNumbers);\n *      var f = curriedAddFourNumbers(1, 2);\n *      var g = f(3);\n *      g(4); //=> 10\n */\nmodule.exports = _curry2(function curryN(length, fn) {\n  return arity(length, _curryN(length, [], fn));\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/union-type/~/ramda/src/curryN.js\n **/","var _curry1 = require('./_curry1');\n\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curry2(fn) {\n  return function f2(a, b) {\n    var n = arguments.length;\n    if (n === 0) {\n      return f2;\n    } else if (n === 1 && a != null && a['@@functional/placeholder'] === true) {\n      return f2;\n    } else if (n === 1) {\n      return _curry1(function(b) { return fn(a, b); });\n    } else if (n === 2 && a != null && a['@@functional/placeholder'] === true &&\n                          b != null && b['@@functional/placeholder'] === true) {\n      return f2;\n    } else if (n === 2 && a != null && a['@@functional/placeholder'] === true) {\n      return _curry1(function(a) { return fn(a, b); });\n    } else if (n === 2 && b != null && b['@@functional/placeholder'] === true) {\n      return _curry1(function(b) { return fn(a, b); });\n    } else {\n      return fn(a, b);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/union-type/~/ramda/src/internal/_curry2.js\n **/","/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0) {\n      return f1;\n    } else if (a != null && a['@@functional/placeholder'] === true) {\n      return f1;\n    } else {\n      return fn(a);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/union-type/~/ramda/src/internal/_curry1.js\n **/","var arity = require('../arity');\n\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @return {array} An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n */\nmodule.exports = function _curryN(length, received, fn) {\n  return function() {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length &&\n          (received[combinedIdx] == null ||\n           received[combinedIdx]['@@functional/placeholder'] !== true ||\n           argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (result == null || result['@@functional/placeholder'] !== true) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined) : arity(left, _curryN(length, combined, fn));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/union-type/~/ramda/src/internal/_curryN.js\n **/","var _curry2 = require('./internal/_curry2');\n\n\n/**\n * Wraps a function of any arity (including nullary) in a function that accepts exactly `n`\n * parameters. Unlike `nAry`, which passes only `n` arguments to the wrapped function,\n * functions produced by `arity` will pass all provided arguments to the wrapped function.\n *\n * @func\n * @memberOf R\n * @sig (Number, (* -> *)) -> (* -> *)\n * @category Function\n * @param {Number} n The desired arity of the returned function.\n * @param {Function} fn The function to wrap.\n * @return {Function} A new function wrapping `fn`. The new function is\n *         guaranteed to be of arity `n`.\n * @deprecated since v0.15.0\n * @example\n *\n *      var takesTwoArgs = function(a, b) {\n *        return [a, b];\n *      };\n *      takesTwoArgs.length; //=> 2\n *      takesTwoArgs(1, 2); //=> [1, 2]\n *\n *      var takesOneArg = R.arity(1, takesTwoArgs);\n *      takesOneArg.length; //=> 1\n *      // All arguments are passed through to the wrapped function\n *      takesOneArg(1, 2); //=> [1, 2]\n */\nmodule.exports = _curry2(function(n, fn) {\n  // jshint unused:vars\n  switch (n) {\n    case 0: return function() {return fn.apply(this, arguments);};\n    case 1: return function(a0) {return fn.apply(this, arguments);};\n    case 2: return function(a0, a1) {return fn.apply(this, arguments);};\n    case 3: return function(a0, a1, a2) {return fn.apply(this, arguments);};\n    case 4: return function(a0, a1, a2, a3) {return fn.apply(this, arguments);};\n    case 5: return function(a0, a1, a2, a3, a4) {return fn.apply(this, arguments);};\n    case 6: return function(a0, a1, a2, a3, a4, a5) {return fn.apply(this, arguments);};\n    case 7: return function(a0, a1, a2, a3, a4, a5, a6) {return fn.apply(this, arguments);};\n    case 8: return function(a0, a1, a2, a3, a4, a5, a6, a7) {return fn.apply(this, arguments);};\n    case 9: return function(a0, a1, a2, a3, a4, a5, a6, a7, a8) {return fn.apply(this, arguments);};\n    case 10: return function(a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {return fn.apply(this, arguments);};\n    default: throw new Error('First argument to arity must be a non-negative integer no greater than ten');\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/union-type/~/ramda/src/arity.js\n **/","var _clone = require('./internal/_clone');\nvar _curry1 = require('./internal/_curry1');\n\n\n/**\n * Creates a deep copy of the value which may contain (nested) `Array`s and `Object`s, `Number`s,\n * `String`s, `Boolean`s and `Date`s. `Function`s are not copied, but assigned by their\n * reference. Dispatches to a `clone` method if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {*} -> {*}\n * @param {*} value The object or array to clone\n * @return {*} A new object or array.\n * @example\n *\n *      var objects = [{}, {}, {}];\n *      var objectsClone = R.clone(objects);\n *      objects[0] === objectsClone[0]; //=> false\n */\nmodule.exports = _curry1(function clone(value) {\n  return value != null && typeof value.clone === 'function' ?\n    value.clone() :\n    _clone(value, [], []);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/clone.js\n **/","var _cloneRegExp = require('./_cloneRegExp');\nvar type = require('../type');\n\n\n/**\n * Copies an object.\n *\n * @private\n * @param {*} value The value to be copied\n * @param {Array} refFrom Array containing the source references\n * @param {Array} refTo Array containing the copied source references\n * @return {*} The copied value.\n */\nmodule.exports = function _clone(value, refFrom, refTo) {\n  var copy = function copy(copiedValue) {\n    var len = refFrom.length;\n    var idx = 0;\n    while (idx < len) {\n      if (value === refFrom[idx]) {\n        return refTo[idx];\n      }\n      idx += 1;\n    }\n    refFrom[idx + 1] = value;\n    refTo[idx + 1] = copiedValue;\n    for (var key in value) {\n      copiedValue[key] = _clone(value[key], refFrom, refTo);\n    }\n    return copiedValue;\n  };\n  switch (type(value)) {\n    case 'Object':  return copy({});\n    case 'Array':   return copy([]);\n    case 'Date':    return new Date(value);\n    case 'RegExp':  return _cloneRegExp(value);\n    default:        return value;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_clone.js\n **/","module.exports = function _cloneRegExp(pattern) {\n  return new RegExp(pattern.source, (pattern.global     ? 'g' : '') +\n                                    (pattern.ignoreCase ? 'i' : '') +\n                                    (pattern.multiline  ? 'm' : '') +\n                                    (pattern.sticky     ? 'y' : '') +\n                                    (pattern.unicode    ? 'u' : ''));\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_cloneRegExp.js\n **/","var _curry1 = require('./internal/_curry1');\n\n\n/**\n * Gives a single-word string description of the (native) type of a value, returning such\n * answers as 'Object', 'Number', 'Array', or 'Null'.  Does not attempt to distinguish user\n * Object types any further, reporting them all as 'Object'.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Type\n * @sig (* -> {*}) -> String\n * @param {*} val The value to test\n * @return {String}\n * @example\n *\n *      R.type({}); //=> \"Object\"\n *      R.type(1); //=> \"Number\"\n *      R.type(false); //=> \"Boolean\"\n *      R.type('s'); //=> \"String\"\n *      R.type(null); //=> \"Null\"\n *      R.type([]); //=> \"Array\"\n *      R.type(/[A-z]/); //=> \"RegExp\"\n */\nmodule.exports = _curry1(function type(val) {\n  return val === null      ? 'Null'      :\n         val === undefined ? 'Undefined' :\n         Object.prototype.toString.call(val).slice(8, -1);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/type.js\n **/","/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0) {\n      return f1;\n    } else if (a != null && a['@@functional/placeholder'] === true) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_curry1.js\n **/","import flyd from 'flyd'\nimport Type from 'union-type'\nimport { logAction, displayFromDiff, diff, actionModuleInfo } from './utils/logdiff'\nimport Helpers from './utils/helpers'\nimport timetravel from './modules/timetravel'\nimport style from './utils/style'\n\nconst R = {\n  pipe: require('ramda/src/pipe'),\n  equals: require('ramda/src/equals'),\n}\n\n// Attach architecture to the main module\nlet run = engineDef => {\n\n  let ctx, model$, driverStreams = {}, module\n  let middleUpdatesArr = [], middleware = engineDef.middleware || {}, log = engineDef.log || false\n  engineDef.logAll = (engineDef.hasOwnProperty('logAll')) ? engineDef.logAll : false\n\n  for (let key in middleware) {\n    middleUpdatesArr.push(middleware[key])\n  }\n\n  // TODO: Document that middleware can slow programs\n  let middleUpdates = (middleUpdatesArr.length == 0) ? m => m : R.pipe.apply(this, middleUpdatesArr)\n\n  let moduleDef = (engineDef.timetravel) ? timetravel(engineDef.root) : engineDef.root\n\n  let attach = model => { // model is used for webpack HMR\n\n    module = Helpers.createContext(moduleDef)\n    ctx = module.ctx\n\n    function log(m, newModel, action = { _initial: true, _log: engineDef.log || engineDef.logAll, _moduleName: module.name }) {\n      let actionInfo = actionModuleInfo(action)\n      if (engineDef.log && actionInfo.log || engineDef.logAll) {\n        if (!action._initial) {\n          logAction(action)\n          displayFromDiff(diff(m, newModel))\n        } else {\n          console.log('%c Fractal is initializing your app.', 'color: purple; font-size: 14px')\n          console.log('%c Model computed ...', 'color: purple; font-size: 14px')\n          console.log('%c Connecting machines to external world ...', 'color: purple; font-size: 14px')\n          console.log('%c Done. Have a nice day!! :)', 'color: purple; font-size: 14px')\n        }\n        console.log(newModel)\n      }\n      return newModel\n    }\n\n    model$ = flyd.scan((m, a) => log(m, middleUpdates(module.update(a, m)), Helpers.addModuleInfo(module, a)), log({}, middleUpdates((model) ? model : module.init({key: 'mainModule'}))), ctx.action$) // state\n\n    // automerge services\n    if (!engineDef.tasks) {\n      engineDef.tasks = {}\n    }\n    if (!engineDef.drivers) {\n      engineDef.drivers = {}\n    }\n    for (let serviceName in engineDef.services) {\n      for (let taskName in engineDef.services[serviceName].tasks) {\n        if (taskName == '_') {\n          engineDef.tasks[serviceName] = engineDef.services[serviceName].tasks[taskName]\n        } else {\n          engineDef.tasks[`${serviceName}_${taskName}`] = engineDef.services[serviceName].tasks[taskName]\n        }\n      }\n      for (let driverName in engineDef.services[serviceName].drivers) {\n        if (driverName == '_') {\n          engineDef.drivers[serviceName] = engineDef.services[serviceName].drivers[driverName]\n        } else {\n          engineDef.drivers[`${serviceName}_${driverName}`] = engineDef.services[serviceName].drivers[driverName]\n        }\n      }\n    }\n\n    // connect tasks handlers to interfaces\n    flyd.on(t => {\n      let task = Helpers.addModuleInfo(moduleDef, t)\n      if (engineDef.tasks[task[0]]) {\n        engineDef.tasks[task[0]].run(task[1])\n      } else if (engineDef.log && task._log || engineDef.logAll) {\n        console.warn(`There are no handler for ${task[0]} task, sended by ${task._moduleName} module`)\n      }\n    }, ctx.task$)\n\n    // attach drivers to interfaces\n    for (let driverName in engineDef.drivers) {\n      if (module.interfaces[driverName]) {\n        // TODO: evaluate error handling, maybe an error$ stream\n        // driverStreams[driverName] =\n        //   flyd.map(model => e('driverExecution', {name: driverName, model}, () => module.interfaces[driverName](model)), model$)\n        driverStreams[driverName] = flyd.map(module.interfaces[driverName], model$)\n        if (model) {\n          engineDef.drivers[driverName].reattach(driverStreams[driverName])\n        } else {\n          engineDef.drivers[driverName].attach(driverStreams[driverName])\n        }\n      }\n    }\n  }\n\n\n  let disposeConnections = () => {\n    ctx.action$.end(true)\n    ctx.task$.end(true)\n    model$.end(true)\n    for (let driverName in driverStreams) {\n      driverStreams[driverName].end(true)\n      engineDef.drivers[driverName].dispose()\n    }\n  }\n\n  let dispose = () => {\n    disposeConnections()\n    style.dispose()\n  }\n\n  let reattach = (reModule) => {\n    // TODO: this can be optimized for hot realoading with a diff-patch algorithm\n    disposeConnections()\n    let newModel = (R.equals(moduleDef.init({key: 'mainModule'}), reModule.init({key: 'mainModule'}))) ? model$() : reModule.init({key: 'mainModule'})\n    moduleDef = reModule\n    attach(newModel)\n  }\n\n  attach()\n\n  return {\n    ctx,\n    inputs: module.inputs,\n    tasks: engineDef.tasks,\n    drivers: engineDef.drivers,\n    reattach,\n    dispose,\n  }\n}\n\nexport default {\n  run,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/engine.js\n **/","'use strict';\n\nvar curryN = require('ramda/src/curryN');\n\n// Utility\nfunction isFunction(obj) {\n  return !!(obj && obj.constructor && obj.call && obj.apply);\n}\nfunction trueFn() { return true; }\n\n// Globals\nvar toUpdate = [];\nvar inStream;\nvar order = [];\nvar orderNextIdx = -1;\nvar flushing = false;\n\n/** @namespace */\nvar flyd = {}\n\n// /////////////////////////// API ///////////////////////////////// //\n\n/**\n * Creates a new stream\n *\n * __Signature__: `a -> Stream a`\n *\n * @name flyd.stream\n * @param {*} initialValue - (Optional) the initial value of the stream\n * @return {stream} the stream\n *\n * @example\n * var n = flyd.stream(1); // Stream with initial value `1`\n * var s = flyd.stream(); // Stream with no initial value\n */\nflyd.stream = function(initialValue) {\n  var endStream = createDependentStream([], trueFn);\n  var s = createStream();\n  s.end = endStream;\n  s.fnArgs = [];\n  endStream.listeners.push(s);\n  if (arguments.length > 0) s(initialValue);\n  return s;\n}\n\n/**\n * Create a new dependent stream\n *\n * __Signature__: `(...Stream * -> Stream b -> b) -> [Stream *] -> Stream b`\n *\n * @name flyd.combine\n * @param {Function} fn - the function used to combine the streams\n * @param {Array<stream>} dependencies - the streams that this one depends on\n * @return {stream} the dependent stream\n *\n * @example\n * var n1 = flyd.stream(0);\n * var n2 = flyd.stream(0);\n * var max = flyd.combine(function(n1, n2, self, changed) {\n *   return n1() > n2() ? n1() : n2();\n * }, [n1, n2]);\n */\nflyd.combine = curryN(2, combine);\nfunction combine(fn, streams) {\n  var i, s, deps, depEndStreams;\n  var endStream = createDependentStream([], trueFn);\n  deps = []; depEndStreams = [];\n  for (i = 0; i < streams.length; ++i) {\n    if (streams[i] !== undefined) {\n      deps.push(streams[i]);\n      if (streams[i].end !== undefined) depEndStreams.push(streams[i].end);\n    }\n  }\n  s = createDependentStream(deps, fn);\n  s.depsChanged = [];\n  s.fnArgs = s.deps.concat([s, s.depsChanged]);\n  s.end = endStream;\n  endStream.listeners.push(s);\n  addListeners(depEndStreams, endStream);\n  endStream.deps = depEndStreams;\n  updateStream(s);\n  return s;\n}\n\n/**\n * Returns `true` if the supplied argument is a Flyd stream and `false` otherwise.\n *\n * __Signature__: `* -> Boolean`\n *\n * @name flyd.isStream\n * @param {*} value - the value to test\n * @return {Boolean} `true` if is a Flyd streamn, `false` otherwise\n *\n * @example\n * var s = flyd.stream(1);\n * var n = 1;\n * flyd.isStream(s); //=> true\n * flyd.isStream(n); //=> false\n */\nflyd.isStream = function(stream) {\n  return isFunction(stream) && 'hasVal' in stream;\n}\n\n/**\n * Invokes the body (the function to calculate the value) of a dependent stream\n *\n * By default the body of a dependent stream is only called when all the streams\n * upon which it depends has a value. `immediate` can circumvent this behaviour.\n * It immediately invokes the body of a dependent stream.\n *\n * __Signature__: `Stream a -> Stream a`\n *\n * @name flyd.immediate\n * @param {stream} stream - the dependent stream\n * @return {stream} the same stream\n *\n * @example\n * var s = flyd.stream();\n * var hasItems = flyd.immediate(flyd.combine(function(s) {\n *   return s() !== undefined && s().length > 0;\n * }, [s]);\n * console.log(hasItems()); // logs `false`. Had `immediate` not been\n *                          // used `hasItems()` would've returned `undefined`\n * s([1]);\n * console.log(hasItems()); // logs `true`.\n * s([]);\n * console.log(hasItems()); // logs `false`.\n */\nflyd.immediate = function(s) {\n  if (s.depsMet === false) {\n    s.depsMet = true;\n    updateStream(s);\n  }\n  return s;\n}\n\n/**\n * Changes which `endsStream` should trigger the ending of `s`.\n *\n * __Signature__: `Stream a -> Stream b -> Stream b`\n *\n * @name flyd.endsOn\n * @param {stream} endStream - the stream to trigger the ending\n * @param {stream} stream - the stream to be ended by the endStream\n * @param {stream} the stream modified to be ended by endStream\n *\n * @example\n * var n = flyd.stream(1);\n * var killer = flyd.stream();\n * // `double` ends when `n` ends or when `killer` emits any value\n * var double = flyd.endsOn(flyd.merge(n.end, killer), flyd.combine(function(n) {\n *   return 2 * n();\n * }, [n]);\n*/\nflyd.endsOn = function(endS, s) {\n  detachDeps(s.end);\n  endS.listeners.push(s.end);\n  s.end.deps.push(endS);\n  return s;\n}\n\n/**\n * Map a stream\n *\n * Returns a new stream consisting of every value from `s` passed through\n * `fn`. I.e. `map` creates a new stream that listens to `s` and\n * applies `fn` to every new value.\n * __Signature__: `(a -> result) -> Stream a -> Stream result`\n *\n * @name flyd.map\n * @param {Function} fn - the function that produces the elements of the new stream\n * @param {stream} stream - the stream to map\n * @return {stream} a new stream with the mapped values\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = flyd.map(function(n) { return n*n; }, numbers);\n */\n// Library functions use self callback to accept (null, undefined) update triggers.\nflyd.map = curryN(2, function(f, s) {\n  return combine(function(s, self) { self(f(s.val)); }, [s]);\n})\n\n/**\n * Listen to stream events\n *\n * Similar to `map` except that the returned stream is empty. Use `on` for doing\n * side effects in reaction to stream changes. Use the returned stream only if you\n * need to manually end it.\n *\n * __Signature__: `(a -> result) -> Stream a -> Stream undefined`\n *\n * @name flyd.on\n * @param {Function} cb - the callback\n * @param {stream} stream - the stream\n * @return {stream} an empty stream (can be ended)\n */\nflyd.on = curryN(2, function(f, s) {\n  return combine(function(s) { f(s.val); }, [s]);\n})\n\n/**\n * Creates a new stream with the results of calling the function on every incoming\n * stream with and accumulator and the incoming value.\n *\n * __Signature__: `(a -> b -> a) -> a -> Stream b -> Stream a`\n *\n * @name flyd.scan\n * @param {Function} fn - the function to call\n * @param {*} val - the initial value of the accumulator\n * @param {stream} stream - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var numbers = flyd.stream();\n * var sum = flyd.scan(function(sum, n) { return sum+n; }, 0, numbers);\n * numbers(2)(3)(5);\n * sum(); // 10\n */\nflyd.scan = curryN(3, function(f, acc, s) {\n  var ns = combine(function(s, self) {\n    self(acc = f(acc, s.val));\n  }, [s]);\n  if (!ns.hasVal) ns(acc);\n  return ns;\n});\n\n/**\n * Creates a new stream down which all values from both `stream1` and `stream2`\n * will be sent.\n *\n * __Signature__: `Stream a -> Stream a -> Stream a`\n *\n * @name flyd.merge\n * @param {stream} source1 - one stream to be merged\n * @param {stream} source2 - the other stream to be merged\n * @return {stream} a stream with the values from both sources\n *\n * @example\n * var btn1Clicks = flyd.stream();\n * button1Elm.addEventListener(btn1Clicks);\n * var btn2Clicks = flyd.stream();\n * button2Elm.addEventListener(btn2Clicks);\n * var allClicks = flyd.merge(btn1Clicks, btn2Clicks);\n */\nflyd.merge = curryN(2, function(s1, s2) {\n  var s = flyd.immediate(combine(function(s1, s2, self, changed) {\n    if (changed[0]) {\n      self(changed[0]());\n    } else if (s1.hasVal) {\n      self(s1.val);\n    } else if (s2.hasVal) {\n      self(s2.val);\n    }\n  }, [s1, s2]));\n  flyd.endsOn(combine(function() {\n    return true;\n  }, [s1.end, s2.end]), s);\n  return s;\n});\n\n/**\n * Creates a new stream resulting from applying `transducer` to `stream`.\n *\n * __Signature__: `Transducer -> Stream a -> Stream b`\n *\n * @name flyd.transduce\n * @param {Transducer} xform - the transducer transformation\n * @param {stream} source - the stream source\n * @return {stream} the new stream\n *\n * @example\n * var t = require('transducers.js');\n *\n * var results = [];\n * var s1 = flyd.stream();\n * var tx = t.compose(t.map(function(x) { return x * 2; }), t.dedupe());\n * var s2 = flyd.transduce(tx, s1);\n * flyd.combine(function(s2) { results.push(s2()); }, [s2]);\n * s1(1)(1)(2)(3)(3)(3)(4);\n * results; // => [2, 4, 6, 8]\n */\nflyd.transduce = curryN(2, function(xform, source) {\n  xform = xform(new StreamTransformer());\n  return combine(function(source, self) {\n    var res = xform['@@transducer/step'](undefined, source.val);\n    if (res && res['@@transducer/reduced'] === true) {\n      self.end(true);\n      return res['@@transducer/value'];\n    } else {\n      return res;\n    }\n  }, [source]);\n});\n\n/**\n * Returns `fn` curried to `n`. Use this function to curry functions exposed by\n * modules for Flyd.\n *\n * @name flyd.curryN\n * @function\n * @param {Integer} arity - the function arity\n * @param {Function} fn - the function to curry\n * @return {Function} the curried function\n *\n * @example\n * function add(x, y) { return x + y; };\n * var a = flyd.curryN(2, add);\n * a(2)(4) // => 6\n */\nflyd.curryN = curryN\n\n/**\n * Returns a new stream identical to the original except every\n * value will be passed through `f`.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream a`: `(a -> b) -> Stream b`\n *\n * @name stream.map\n * @param {Function} function - the function to apply\n * @return {stream} a new stream with the values mapped\n *\n * @example\n * var numbers = flyd.stream(0);\n * var squaredNumbers = numbers.map(function(n) { return n*n; });\n */\nfunction boundMap(f) { return flyd.map(f, this); }\n\n/**\n * Returns a new stream which is the result of applying the\n * functions from `this` stream to the values in `stream` parameter.\n *\n * `this` stream must be a stream of functions.\n *\n * _Note:_ This function is included in order to support the fantasy land\n * specification.\n *\n * __Signature__: Called bound to `Stream (a -> b)`: `a -> Stream b`\n *\n * @name stream.ap\n * @param {stream} stream - the values stream\n * @return {stream} a new stram with the functions applied to values\n *\n * @example\n * var add = flyd.curryN(2, function(x, y) { return x + y; });\n * var numbers1 = flyd.stream();\n * var numbers2 = flyd.stream();\n * var addToNumbers1 = flyd.map(add, numbers1);\n * var added = addToNumbers1.ap(numbers2);\n */\nfunction ap(s2) {\n  var s1 = this;\n  return combine(function(s1, s2, self) { self(s1.val(s2.val)); }, [s1, s2]);\n}\n\n/**\n * Get a human readable view of a stream\n * @name stream.toString\n * @return {String} the stream string representation\n */\nfunction streamToString() {\n  return 'stream(' + this.val + ')';\n}\n\n/**\n * @name stream.end\n * @memberof stream\n * A stream that emits `true` when the stream ends. If `true` is pushed down the\n * stream the parent stream ends.\n */\n\n/**\n * @name stream.of\n * @function\n * @memberof stream\n * Returns a new stream with `value` as its initial value. It is identical to\n * calling `flyd.stream` with one argument.\n *\n * __Signature__: Called bound to `Stream (a)`: `b -> Stream b`\n *\n * @param {*} value - the initial value\n * @return {stream} the new stream\n *\n * @example\n * var n = flyd.stream(1);\n * var m = n.of(1);\n */\n\n// /////////////////////////// PRIVATE ///////////////////////////////// //\n/**\n * @private\n * Create a stream with no dependencies and no value\n * @return {Function} a flyd stream\n */\nfunction createStream() {\n  function s(n) {\n    if (arguments.length === 0) return s.val\n    updateStreamValue(s, n)\n    return s\n  }\n  s.hasVal = false;\n  s.val = undefined;\n  s.vals = [];\n  s.listeners = [];\n  s.queued = false;\n  s.end = undefined;\n  s.map = boundMap;\n  s.ap = ap;\n  s.of = flyd.stream;\n  s.toString = streamToString;\n  return s;\n}\n\n/**\n * @private\n * Create a dependent stream\n * @param {Array<stream>} dependencies - an array of the streams\n * @param {Function} fn - the function used to calculate the new stream value\n * from the dependencies\n * @return {stream} the created stream\n */\nfunction createDependentStream(deps, fn) {\n  var s = createStream();\n  s.fn = fn;\n  s.deps = deps;\n  s.depsMet = false;\n  s.depsChanged = deps.length > 0 ? [] : undefined;\n  s.shouldUpdate = false;\n  addListeners(deps, s);\n  return s;\n}\n\n/**\n * @private\n * Check if all the dependencies have values\n * @param {stream} stream - the stream to check depencencies from\n * @return {Boolean} `true` if all dependencies have vales, `false` otherwise\n */\nfunction initialDepsNotMet(stream) {\n  stream.depsMet = stream.deps.every(function(s) {\n    return s.hasVal;\n  });\n  return !stream.depsMet;\n}\n\n/**\n * @private\n * Update a dependent stream using its dependencies in an atomic way\n * @param {stream} stream - the stream to update\n */\nfunction updateStream(s) {\n  if ((s.depsMet !== true && initialDepsNotMet(s)) ||\n      (s.end !== undefined && s.end.val === true)) return;\n  if (inStream !== undefined) {\n    toUpdate.push(s);\n    return;\n  }\n  inStream = s;\n  if (s.depsChanged) s.fnArgs[s.fnArgs.length - 1] = s.depsChanged;\n  var returnVal = s.fn.apply(s.fn, s.fnArgs);\n  if (returnVal !== undefined) {\n    s(returnVal);\n  }\n  inStream = undefined;\n  if (s.depsChanged !== undefined) s.depsChanged = [];\n  s.shouldUpdate = false;\n  if (flushing === false) flushUpdate();\n}\n\n/**\n * @private\n * Update the dependencies of a stream\n * @param {stream} stream\n */\nfunction updateDeps(s) {\n  var i, o, list\n  var listeners = s.listeners;\n  for (i = 0; i < listeners.length; ++i) {\n    list = listeners[i];\n    if (list.end === s) {\n      endStream(list);\n    } else {\n      if (list.depsChanged !== undefined) list.depsChanged.push(s);\n      list.shouldUpdate = true;\n      findDeps(list);\n    }\n  }\n  for (; orderNextIdx >= 0; --orderNextIdx) {\n    o = order[orderNextIdx];\n    if (o.shouldUpdate === true) updateStream(o);\n    o.queued = false;\n  }\n}\n\n/**\n * @private\n * Add stream dependencies to the global `order` queue.\n * @param {stream} stream\n * @see updateDeps\n */\nfunction findDeps(s) {\n  var i\n  var listeners = s.listeners;\n  if (s.queued === false) {\n    s.queued = true;\n    for (i = 0; i < listeners.length; ++i) {\n      findDeps(listeners[i]);\n    }\n    order[++orderNextIdx] = s;\n  }\n}\n\n/**\n * @private\n */\nfunction flushUpdate() {\n  flushing = true;\n  while (toUpdate.length > 0) {\n    var s = toUpdate.shift();\n    if (s.vals.length > 0) s.val = s.vals.shift();\n    updateDeps(s);\n  }\n  flushing = false;\n}\n\n/**\n * @private\n * Push down a value into a stream\n * @param {stream} stream\n * @param {*} value\n */\nfunction updateStreamValue(s, n) {\n  if (n !== undefined && n !== null && isFunction(n.then)) {\n    n.then(s);\n    return;\n  }\n  s.val = n;\n  s.hasVal = true;\n  if (inStream === undefined) {\n    flushing = true;\n    updateDeps(s);\n    if (toUpdate.length > 0) flushUpdate(); else flushing = false;\n  } else if (inStream === s) {\n    markListeners(s, s.listeners);\n  } else {\n    s.vals.push(n);\n    toUpdate.push(s);\n  }\n}\n\n/**\n * @private\n */\nfunction markListeners(s, lists) {\n  var i, list;\n  for (i = 0; i < lists.length; ++i) {\n    list = lists[i];\n    if (list.end !== s) {\n      if (list.depsChanged !== undefined) {\n        list.depsChanged.push(s);\n      }\n      list.shouldUpdate = true;\n    } else {\n      endStream(list);\n    }\n  }\n}\n\n/**\n * @private\n * Add dependencies to a stream\n * @param {Array<stream>} dependencies\n * @param {stream} stream\n */\nfunction addListeners(deps, s) {\n  for (var i = 0; i < deps.length; ++i) {\n    deps[i].listeners.push(s);\n  }\n}\n\n/**\n * @private\n * Removes an stream from a dependency array\n * @param {stream} stream\n * @param {Array<stream>} dependencies\n */\nfunction removeListener(s, listeners) {\n  var idx = listeners.indexOf(s);\n  listeners[idx] = listeners[listeners.length - 1];\n  listeners.length--;\n}\n\n/**\n * @private\n * Detach a stream from its dependencies\n * @param {stream} stream\n */\nfunction detachDeps(s) {\n  for (var i = 0; i < s.deps.length; ++i) {\n    removeListener(s, s.deps[i].listeners);\n  }\n  s.deps.length = 0;\n}\n\n/**\n * @private\n * Ends a stream\n */\nfunction endStream(s) {\n  if (s.deps !== undefined) detachDeps(s);\n  if (s.end !== undefined) detachDeps(s.end);\n}\n\n/**\n * @private\n * transducer stream transformer\n */\nfunction StreamTransformer() { }\nStreamTransformer.prototype['@@transducer/init'] = function() { };\nStreamTransformer.prototype['@@transducer/result'] = function() { };\nStreamTransformer.prototype['@@transducer/step'] = function(s, v) { return v; };\n\nmodule.exports = flyd;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flyd/lib/index.js\n **/","var _arity = require('./internal/_arity');\nvar _curry1 = require('./internal/_curry1');\nvar _curry2 = require('./internal/_curry2');\nvar _curryN = require('./internal/_curryN');\n\n\n/**\n * Returns a curried equivalent of the provided function, with the specified\n * arity. The curried function has two unusual capabilities. First, its\n * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n * following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value `R.__` may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is `R.__`, the\n * following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      var sumArgs = (...args) => R.sum(args);\n *\n *      var curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      var f = curriedAddFourNumbers(1, 2);\n *      var g = f(3);\n *      g(4); //=> 10\n */\nmodule.exports = _curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flyd/~/ramda/src/curryN.js\n **/","module.exports = function _arity(n, fn) {\n  /* eslint-disable no-unused-vars */\n  switch (n) {\n    case 0: return function() { return fn.apply(this, arguments); };\n    case 1: return function(a0) { return fn.apply(this, arguments); };\n    case 2: return function(a0, a1) { return fn.apply(this, arguments); };\n    case 3: return function(a0, a1, a2) { return fn.apply(this, arguments); };\n    case 4: return function(a0, a1, a2, a3) { return fn.apply(this, arguments); };\n    case 5: return function(a0, a1, a2, a3, a4) { return fn.apply(this, arguments); };\n    case 6: return function(a0, a1, a2, a3, a4, a5) { return fn.apply(this, arguments); };\n    case 7: return function(a0, a1, a2, a3, a4, a5, a6) { return fn.apply(this, arguments); };\n    case 8: return function(a0, a1, a2, a3, a4, a5, a6, a7) { return fn.apply(this, arguments); };\n    case 9: return function(a0, a1, a2, a3, a4, a5, a6, a7, a8) { return fn.apply(this, arguments); };\n    case 10: return function(a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) { return fn.apply(this, arguments); };\n    default: throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flyd/~/ramda/src/internal/_arity.js\n **/","var _isPlaceholder = require('./_isPlaceholder');\n\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curry1(fn) {\n  return function f1(a) {\n    if (arguments.length === 0 || _isPlaceholder(a)) {\n      return f1;\n    } else {\n      return fn.apply(this, arguments);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flyd/~/ramda/src/internal/_curry1.js\n **/","module.exports = function _isPlaceholder(a) {\n  return a != null &&\n         typeof a === 'object' &&\n         a['@@functional/placeholder'] === true;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flyd/~/ramda/src/internal/_isPlaceholder.js\n **/","var _curry1 = require('./_curry1');\nvar _isPlaceholder = require('./_isPlaceholder');\n\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curry2(fn) {\n  return function f2(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return f2;\n      case 1:\n        return _isPlaceholder(a) ? f2\n             : _curry1(function(_b) { return fn(a, _b); });\n      default:\n        return _isPlaceholder(a) && _isPlaceholder(b) ? f2\n             : _isPlaceholder(a) ? _curry1(function(_a) { return fn(_a, b); })\n             : _isPlaceholder(b) ? _curry1(function(_b) { return fn(a, _b); })\n             : fn(a, b);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flyd/~/ramda/src/internal/_curry2.js\n **/","var _arity = require('./_arity');\nvar _isPlaceholder = require('./_isPlaceholder');\n\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @param {Array} received An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curryN(length, received, fn) {\n  return function() {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length &&\n          (!_isPlaceholder(received[combinedIdx]) ||\n           argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (!_isPlaceholder(result)) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined)\n                     : _arity(left, _curryN(length, combined, fn));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/flyd/~/ramda/src/internal/_curryN.js\n **/","import deepDiff from 'deep-diff'\n\nexport const diff = deepDiff.diff\n\nexport function prettyAction(action) {\n  let actionInfo = actionModuleInfo(action)\n  return `${actionInfo.modulePath.join(' -> ')} / ${actionInfo.lastAction.name}: ${prettyParams(actionInfo.lastAction)}`\n}\n\n\nexport function prettyActionDetailed(action) {\n  let path = [], nested = action\n  while (nested[nested.length - 1] != undefined && nested[nested.length - 1].of != undefined) {\n    if (nested.length == 0) {\n      path.push(nested.name)\n    } else {\n      path.push(nested.name + ' ' + prettyParams(nested))\n    }\n    nested = nested[nested.length - 1]\n  }\n  path.push(nested.name)\n  return `${path.join(' -> ')} : ${prettyParams(nested)}`\n}\n\n// deep extract info from an Action: log, modulePath, lastAction\nexport function actionModuleInfo(action) {\n  let modulePath = [], nested = action, log, logAll = false\n  while (nested[nested.length - 1] != undefined && nested[nested.length - 1].of != undefined) {\n    logAll = logAll || nested._logAll\n    modulePath.push(nested._moduleName)\n    nested = nested[nested.length - 1]\n  }\n  log = logAll || nested._log || nested._logAll\n  modulePath.push(nested._moduleName)\n  return {\n    log,\n    modulePath,\n    lastAction: nested,\n  }\n}\n\nexport function prettyParams(params) {\n  let paramString = params.map(param => {\n    if (typeof(param) === 'function' || typeof(param) === 'object') {\n      if (Array.isArray(param)) {\n        return 'array'\n      } else {\n        return typeof param\n      }\n    }\n    return param\n  }).join(', ')\n  return (paramString === '') ? 'none' : paramString\n}\n\nexport function prettyDiff(diffArray) {\n  diffArray = diffArray || []\n  let logs = []\n  diffArray.forEach(diff => {\n    let getType = diff => {\n      if (diff.kind == 'N')\n        return 'added'\n      else if (diff.kind == 'D')\n        return 'deleted'\n      else if (diff.kind == 'E')\n        return 'edited'\n      else if (diff.kind == 'A')\n        return 'array'\n    }\n\n    let type = getType(diff)\n\n    if(type == 'array') // if an array is modified\n      logs.push(`${type} ${diff.path.join('.')} : index ${diff.index} ${getType(diff.item)}`)\n    else\n      logs.push(`${type} ${diff.path.join('.')} : ${diff.lhs} -> ${diff.rhs}`)\n  })\n  return logs\n}\n\nexport function logAction(action) { console.log(`%c${prettyAction(action)}`, 'color: green') }\n\nexport function displayFromDiff(diffArray) {\n  prettyDiff(diffArray).forEach(log => console.log(`%c${log}`, 'color: darkblue'))\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils/logdiff.js\n **/","/*!\n * deep-diff.\n * Licensed under the MIT License.\n */\n;(function(root, factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], function() {\n      return factory();\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.DeepDiff = factory();\n  }\n}(this, function(undefined) {\n  'use strict';\n\n  var $scope, conflict, conflictResolution = [];\n  if (typeof global === 'object' && global) {\n    $scope = global;\n  } else if (typeof window !== 'undefined') {\n    $scope = window;\n  } else {\n    $scope = {};\n  }\n  conflict = $scope.DeepDiff;\n  if (conflict) {\n    conflictResolution.push(\n      function() {\n        if ('undefined' !== typeof conflict && $scope.DeepDiff === accumulateDiff) {\n          $scope.DeepDiff = conflict;\n          conflict = undefined;\n        }\n      });\n  }\n\n  // nodejs compatible on server side and in the browser.\n  function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  }\n\n  function Diff(kind, path) {\n    Object.defineProperty(this, 'kind', {\n      value: kind,\n      enumerable: true\n    });\n    if (path && path.length) {\n      Object.defineProperty(this, 'path', {\n        value: path,\n        enumerable: true\n      });\n    }\n  }\n\n  function DiffEdit(path, origin, value) {\n    DiffEdit.super_.call(this, 'E', path);\n    Object.defineProperty(this, 'lhs', {\n      value: origin,\n      enumerable: true\n    });\n    Object.defineProperty(this, 'rhs', {\n      value: value,\n      enumerable: true\n    });\n  }\n  inherits(DiffEdit, Diff);\n\n  function DiffNew(path, value) {\n    DiffNew.super_.call(this, 'N', path);\n    Object.defineProperty(this, 'rhs', {\n      value: value,\n      enumerable: true\n    });\n  }\n  inherits(DiffNew, Diff);\n\n  function DiffDeleted(path, value) {\n    DiffDeleted.super_.call(this, 'D', path);\n    Object.defineProperty(this, 'lhs', {\n      value: value,\n      enumerable: true\n    });\n  }\n  inherits(DiffDeleted, Diff);\n\n  function DiffArray(path, index, item) {\n    DiffArray.super_.call(this, 'A', path);\n    Object.defineProperty(this, 'index', {\n      value: index,\n      enumerable: true\n    });\n    Object.defineProperty(this, 'item', {\n      value: item,\n      enumerable: true\n    });\n  }\n  inherits(DiffArray, Diff);\n\n  function arrayRemove(arr, from, to) {\n    var rest = arr.slice((to || from) + 1 || arr.length);\n    arr.length = from < 0 ? arr.length + from : from;\n    arr.push.apply(arr, rest);\n    return arr;\n  }\n\n  function realTypeOf(subject) {\n    var type = typeof subject;\n    if (type !== 'object') {\n      return type;\n    }\n\n    if (subject === Math) {\n      return 'math';\n    } else if (subject === null) {\n      return 'null';\n    } else if (Array.isArray(subject)) {\n      return 'array';\n    } else if (Object.prototype.toString.call(subject) === '[object Date]') {\n      return 'date';\n    } else if (typeof subject.toString !== 'undefined' && /^\\/.*\\//.test(subject.toString())) {\n      return 'regexp';\n    }\n    return 'object';\n  }\n\n  function deepDiff(lhs, rhs, changes, prefilter, path, key, stack) {\n    path = path || [];\n    var currentPath = path.slice(0);\n    if (typeof key !== 'undefined') {\n      if (prefilter) {\n        if (typeof(prefilter) === 'function' && prefilter(currentPath, key)) { return; }\n        else if (typeof(prefilter) === 'object') {\n          if (prefilter.prefilter && prefilter.prefilter(currentPath, key)) { return; }\n          if (prefilter.normalize) {\n            var alt = prefilter.normalize(currentPath, key, lhs, rhs);\n            if (alt) {\n              lhs = alt[0];\n              rhs = alt[1];\n            }\n          }\n        }\n      }\n      currentPath.push(key);\n    }\n\n    // Use string comparison for regexes\n    if (realTypeOf(lhs) === 'regexp' && realTypeOf(rhs) === 'regexp') {\n      lhs = lhs.toString();\n      rhs = rhs.toString();\n    }\n\n    var ltype = typeof lhs;\n    var rtype = typeof rhs;\n    if (ltype === 'undefined') {\n      if (rtype !== 'undefined') {\n        changes(new DiffNew(currentPath, rhs));\n      }\n    } else if (rtype === 'undefined') {\n      changes(new DiffDeleted(currentPath, lhs));\n    } else if (realTypeOf(lhs) !== realTypeOf(rhs)) {\n      changes(new DiffEdit(currentPath, lhs, rhs));\n    } else if (Object.prototype.toString.call(lhs) === '[object Date]' && Object.prototype.toString.call(rhs) === '[object Date]' && ((lhs - rhs) !== 0)) {\n      changes(new DiffEdit(currentPath, lhs, rhs));\n    } else if (ltype === 'object' && lhs !== null && rhs !== null) {\n      stack = stack || [];\n      if (stack.indexOf(lhs) < 0) {\n        stack.push(lhs);\n        if (Array.isArray(lhs)) {\n          var i, len = lhs.length;\n          for (i = 0; i < lhs.length; i++) {\n            if (i >= rhs.length) {\n              changes(new DiffArray(currentPath, i, new DiffDeleted(undefined, lhs[i])));\n            } else {\n              deepDiff(lhs[i], rhs[i], changes, prefilter, currentPath, i, stack);\n            }\n          }\n          while (i < rhs.length) {\n            changes(new DiffArray(currentPath, i, new DiffNew(undefined, rhs[i++])));\n          }\n        } else {\n          var akeys = Object.keys(lhs);\n          var pkeys = Object.keys(rhs);\n          akeys.forEach(function(k, i) {\n            var other = pkeys.indexOf(k);\n            if (other >= 0) {\n              deepDiff(lhs[k], rhs[k], changes, prefilter, currentPath, k, stack);\n              pkeys = arrayRemove(pkeys, other);\n            } else {\n              deepDiff(lhs[k], undefined, changes, prefilter, currentPath, k, stack);\n            }\n          });\n          pkeys.forEach(function(k) {\n            deepDiff(undefined, rhs[k], changes, prefilter, currentPath, k, stack);\n          });\n        }\n        stack.length = stack.length - 1;\n      }\n    } else if (lhs !== rhs) {\n      if (!(ltype === 'number' && isNaN(lhs) && isNaN(rhs))) {\n        changes(new DiffEdit(currentPath, lhs, rhs));\n      }\n    }\n  }\n\n  function accumulateDiff(lhs, rhs, prefilter, accum) {\n    accum = accum || [];\n    deepDiff(lhs, rhs,\n      function(diff) {\n        if (diff) {\n          accum.push(diff);\n        }\n      },\n      prefilter);\n    return (accum.length) ? accum : undefined;\n  }\n\n  function applyArrayChange(arr, index, change) {\n    if (change.path && change.path.length) {\n      var it = arr[index],\n          i, u = change.path.length - 1;\n      for (i = 0; i < u; i++) {\n        it = it[change.path[i]];\n      }\n      switch (change.kind) {\n        case 'A':\n          applyArrayChange(it[change.path[i]], change.index, change.item);\n          break;\n        case 'D':\n          delete it[change.path[i]];\n          break;\n        case 'E':\n        case 'N':\n          it[change.path[i]] = change.rhs;\n          break;\n      }\n    } else {\n      switch (change.kind) {\n        case 'A':\n          applyArrayChange(arr[index], change.index, change.item);\n          break;\n        case 'D':\n          arr = arrayRemove(arr, index);\n          break;\n        case 'E':\n        case 'N':\n          arr[index] = change.rhs;\n          break;\n      }\n    }\n    return arr;\n  }\n\n  function applyChange(target, source, change) {\n    if (target && source && change && change.kind) {\n      var it = target,\n          i = -1,\n          last = change.path ? change.path.length - 1 : 0;\n      while (++i < last) {\n        if (typeof it[change.path[i]] === 'undefined') {\n          it[change.path[i]] = (typeof change.path[i] === 'number') ? [] : {};\n        }\n        it = it[change.path[i]];\n      }\n      switch (change.kind) {\n        case 'A':\n          applyArrayChange(change.path ? it[change.path[i]] : it, change.index, change.item);\n          break;\n        case 'D':\n          delete it[change.path[i]];\n          break;\n        case 'E':\n        case 'N':\n          it[change.path[i]] = change.rhs;\n          break;\n      }\n    }\n  }\n\n  function revertArrayChange(arr, index, change) {\n    if (change.path && change.path.length) {\n      // the structure of the object at the index has changed...\n      var it = arr[index],\n          i, u = change.path.length - 1;\n      for (i = 0; i < u; i++) {\n        it = it[change.path[i]];\n      }\n      switch (change.kind) {\n        case 'A':\n          revertArrayChange(it[change.path[i]], change.index, change.item);\n          break;\n        case 'D':\n          it[change.path[i]] = change.lhs;\n          break;\n        case 'E':\n          it[change.path[i]] = change.lhs;\n          break;\n        case 'N':\n          delete it[change.path[i]];\n          break;\n      }\n    } else {\n      // the array item is different...\n      switch (change.kind) {\n        case 'A':\n          revertArrayChange(arr[index], change.index, change.item);\n          break;\n        case 'D':\n          arr[index] = change.lhs;\n          break;\n        case 'E':\n          arr[index] = change.lhs;\n          break;\n        case 'N':\n          arr = arrayRemove(arr, index);\n          break;\n      }\n    }\n    return arr;\n  }\n\n  function revertChange(target, source, change) {\n    if (target && source && change && change.kind) {\n      var it = target,\n          i, u;\n      u = change.path.length - 1;\n      for (i = 0; i < u; i++) {\n        if (typeof it[change.path[i]] === 'undefined') {\n          it[change.path[i]] = {};\n        }\n        it = it[change.path[i]];\n      }\n      switch (change.kind) {\n        case 'A':\n          // Array was modified...\n          // it will be an array...\n          revertArrayChange(it[change.path[i]], change.index, change.item);\n          break;\n        case 'D':\n          // Item was deleted...\n          it[change.path[i]] = change.lhs;\n          break;\n        case 'E':\n          // Item was edited...\n          it[change.path[i]] = change.lhs;\n          break;\n        case 'N':\n          // Item is new...\n          delete it[change.path[i]];\n          break;\n      }\n    }\n  }\n\n  function applyDiff(target, source, filter) {\n    if (target && source) {\n      var onChange = function(change) {\n        if (!filter || filter(target, source, change)) {\n          applyChange(target, source, change);\n        }\n      };\n      deepDiff(target, source, onChange);\n    }\n  }\n\n  Object.defineProperties(accumulateDiff, {\n\n    diff: {\n      value: accumulateDiff,\n      enumerable: true\n    },\n    observableDiff: {\n      value: deepDiff,\n      enumerable: true\n    },\n    applyDiff: {\n      value: applyDiff,\n      enumerable: true\n    },\n    applyChange: {\n      value: applyChange,\n      enumerable: true\n    },\n    revertChange: {\n      value: revertChange,\n      enumerable: true\n    },\n    isConflict: {\n      value: function() {\n        return 'undefined' !== typeof conflict;\n      },\n      enumerable: true\n    },\n    noConflict: {\n      value: function() {\n        if (conflictResolution) {\n          conflictResolution.forEach(function(it) {\n            it();\n          });\n          conflictResolution = null;\n        }\n        return accumulateDiff;\n      },\n      enumerable: true\n    }\n  });\n\n  return accumulateDiff;\n}));\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/deep-diff/index.js\n **/","import flyd from 'flyd'\nconst R = {\n  mapObjIndexed: require('ramda/src/mapObjIndexed'),\n  clone: require('ramda/src/clone'),\n  map: require('ramda/src/map'),\n  merge: require('ramda/src/merge'),\n  curryN: require('ramda/src/curryN'),\n  equals: require('ramda/src/equals'),\n}\n\n\nlet connectInterface = (md, name, model, connections) =>\n  (md.interfaces[name]) ? createContext(md, connections).interfaces[name](model) : {}\n\nlet mergeModels = mds => {\n  let obj = {}\n  for (let key in mds) {\n    obj[key] = (mds[key].root) ? mds[key].root.init({key, ...mds[key]}) : mds[key].init({key, ...mds[key]})\n  }\n  return obj\n}\n\n/* Merge child interfaces, flatten\n  childs : Array[Object]\n  interfaceName : String\n  scope : String // use scope if use this function uses two or more times in an interface\n*/\nlet mergeChilds = (childs, md, scope = '', interfaceName, connections) => {\n  let objs = {}\n  R.mapObjIndexed((model, idx) => {\n    R.mapObjIndexed((obj, name) => {\n      objs[scope + idx + '_' + name] = obj\n    }, connectInterface(md, interfaceName, model, connections(+idx)))\n  }, childs)\n  return objs\n}\n\nlet mergeChild = (model, md, scope, interfaceName, connections) => {\n  let objs = {}\n  R.mapObjIndexed((obj, name) => {\n    objs[scope + '_' + name] = obj\n  }, connectInterface(md, interfaceName, model, connections))\n  return objs\n}\n\nfunction addModuleInfo(mDef, obj) {\n  obj._moduleName = mDef.name\n  obj._log = mDef.log\n  obj._logAll = mDef.logAll\n  return obj\n}\n\n// Composition for Fractal core, (mDefinition, connections = {}) -> ContextualizedModule\nlet createContext = (mDefinition, connections = {}) => {\n  let mDef = R.clone(mDefinition)\n\n  let ctx = {\n    action$: flyd.stream(),\n    task$: flyd.stream(),\n    styles: (!!mDef.styles) ? mDef.styles : {},\n  }\n  // append the outputs in the context\n  for (let name in mDef.outputNames) {\n    ctx[mDef.outputNames[name]] = flyd.stream()\n  }\n\n  // connection with the context\n  for (let name in connections) {\n    if (!!ctx[name]) {\n      if (name === 'action$') {\n        flyd.on(d => connections[name](addModuleInfo(mDef, d)), ctx[name])\n      } else {\n        flyd.on(connections[name], ctx[name])\n      }\n    }\n  }\n  // contextualize inputs\n  let inputs = R.map(i => R.curryN(i.length, function(...args) {\n    // wrapper function for tasks\n    let tasks = i(...args)\n    if (tasks != undefined) {\n      if (tasks instanceof Array && tasks.of == undefined && !(typeof(tasks[0]) == 'string' && tasks[1] && typeof(tasks[1].of) == 'object')) {\n        // verify that is not a task in the form [String, TaskAction]\n        // multiple action-task syntax\n        tasks.forEach(t => {\n          if (R.equals(t.of, mDef.Action)) {\n            ctx.action$(t)\n          } else {\n            ctx.task$(t)\n          }\n        })\n      } else if (R.equals(tasks.of, mDef.Action)) {\n        // single action syntax for an action\n        ctx.action$(tasks)\n      } else if (tasks instanceof Array) {\n        // single action syntax for a task\n        ctx.task$(tasks)\n      }\n    } else {\n      // none sense return\n      // ctx.task$('undefined') // DEBUG\n    }\n  })(ctx, mDef.Action), mDef.inputs)\n  ctx._md = mDef.load(ctx, inputs, mDef.Action) || {}\n  // space for dynamic modules\n  ctx._dynamicMd = []\n\n  // connect task$\n  connectTasks(ctx._md)\n\n  function connectTasks(mds) {\n    for (let name in mds) {\n      if (mds[name].mDef) {\n        flyd.on(task => ctx.task$(addModuleInfo(mDef, task)), mds[name].ctx.task$)\n      } else {\n        // connect categorized modules\n        for (let subName in mds[name]) {\n          flyd.on(task => ctx.task$(addModuleInfo(mDef, task)), mds[name][subName].ctx.task$)\n        }\n      }\n    }\n  }\n\n  let md = (mds) => {\n    // connect task$\n    connectTasks(mds)\n    ctx._md = R.merge(ctx._md, mds)\n  }\n  setTimeout(() => mDef.loadAfter(ctx, inputs, mDef.Action, md), 0)\n  // contextualize interfaces\n  mDef.interfaces = R.map(i => R.curryN(3, i)(ctx)(inputs), mDef.interfaces)\n\n  return {\n    ...mDef,\n    ctx,\n    inputs,\n  }\n}\n\n// select a set of _md and map to a list of view interfaces\nlet mergeChildList = (ctx, interfaceName, rootModel, childNames, f = x => x) =>\n R.map(name => f(ctx._md[name].interfaces[interfaceName](rootModel[name])), childNames)\n\nlet mapObjToArray = (fn, obj) => {\n  let arr = []\n  for (let key in obj)\n    arr.push(fn(obj[key], key))\n  return arr\n}\n// TODO: implement funtion that takes [list] -> ( (key, value) -> ({key, value}) ) -> {[key]: value}\n// Useful for optional styles\n\nlet setDynamicMds = (ctxArray, ctx) => {\n}\n\nexport default {\n  createContext,\n  mergeModels,\n  mergeChild,\n  mergeChilds,\n  mergeChildList,\n  connectInterface,\n  addModuleInfo,\n  mapObjToArray,\n  setDynamicMds,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils/helpers.js\n **/","var _curry2 = require('./internal/_curry2');\nvar _reduce = require('./internal/_reduce');\nvar keys = require('./keys');\n\n\n/**\n * Like `mapObj`, but passes additional arguments to the predicate function. The\n * predicate function is passed three arguments: *(value, key, obj)*.\n *\n * @func\n * @memberOf R\n * @since v0.9.0\n * @category Object\n * @sig (v, k, {k: v} -> v) -> {k: v} -> {k: v}\n * @param {Function} fn A function called for each property in `obj`. Its return value will\n *        become a new property on the return object.\n * @param {Object} obj The object to iterate over.\n * @return {Object} A new object with the same keys as `obj` and values that are the result\n *         of running each property through `fn`.\n * @example\n *\n *      var values = { x: 1, y: 2, z: 3 };\n *      var prependKeyAndDouble = (num, key, obj) => key + (num * 2);\n *\n *      R.mapObjIndexed(prependKeyAndDouble, values); //=> { x: 'x2', y: 'y4', z: 'z6' }\n */\nmodule.exports = _curry2(function mapObjIndexed(fn, obj) {\n  return _reduce(function(acc, key) {\n    acc[key] = fn(obj[key], key, obj);\n    return acc;\n  }, {}, keys(obj));\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/mapObjIndexed.js\n **/","var _curry1 = require('./_curry1');\n\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curry2(fn) {\n  return function f2(a, b) {\n    var n = arguments.length;\n    if (n === 0) {\n      return f2;\n    } else if (n === 1 && a != null && a['@@functional/placeholder'] === true) {\n      return f2;\n    } else if (n === 1) {\n      return _curry1(function(b) { return fn(a, b); });\n    } else if (n === 2 && a != null && a['@@functional/placeholder'] === true &&\n                          b != null && b['@@functional/placeholder'] === true) {\n      return f2;\n    } else if (n === 2 && a != null && a['@@functional/placeholder'] === true) {\n      return _curry1(function(a) { return fn(a, b); });\n    } else if (n === 2 && b != null && b['@@functional/placeholder'] === true) {\n      return _curry1(function(b) { return fn(a, b); });\n    } else {\n      return fn(a, b);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_curry2.js\n **/","var _xwrap = require('./_xwrap');\nvar bind = require('../bind');\nvar isArrayLike = require('../isArrayLike');\n\n\nmodule.exports = (function() {\n  function _arrayReduce(xf, acc, list) {\n    var idx = 0, len = list.length;\n    while (idx < len) {\n      acc = xf['@@transducer/step'](acc, list[idx]);\n      if (acc && acc['@@transducer/reduced']) {\n        acc = acc['@@transducer/value'];\n        break;\n      }\n      idx += 1;\n    }\n    return xf['@@transducer/result'](acc);\n  }\n\n  function _iterableReduce(xf, acc, iter) {\n    var step = iter.next();\n    while (!step.done) {\n      acc = xf['@@transducer/step'](acc, step.value);\n      if (acc && acc['@@transducer/reduced']) {\n        acc = acc['@@transducer/value'];\n        break;\n      }\n      step = iter.next();\n    }\n    return xf['@@transducer/result'](acc);\n  }\n\n  function _methodReduce(xf, acc, obj) {\n    return xf['@@transducer/result'](obj.reduce(bind(xf['@@transducer/step'], xf), acc));\n  }\n\n  var symIterator = (typeof Symbol !== 'undefined') ? Symbol.iterator : '@@iterator';\n  return function _reduce(fn, acc, list) {\n    if (typeof fn === 'function') {\n      fn = _xwrap(fn);\n    }\n    if (isArrayLike(list)) {\n      return _arrayReduce(fn, acc, list);\n    }\n    if (typeof list.reduce === 'function') {\n      return _methodReduce(fn, acc, list);\n    }\n    if (list[symIterator] != null) {\n      return _iterableReduce(fn, acc, list[symIterator]());\n    }\n    if (typeof list.next === 'function') {\n      return _iterableReduce(fn, acc, list);\n    }\n    throw new TypeError('reduce: list must be array or iterable');\n  };\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_reduce.js\n **/","module.exports = (function() {\n  function XWrap(fn) {\n    this.f = fn;\n  }\n  XWrap.prototype['@@transducer/init'] = function() {\n    throw new Error('init not implemented on XWrap');\n  };\n  XWrap.prototype['@@transducer/result'] = function(acc) { return acc; };\n  XWrap.prototype['@@transducer/step'] = function(acc, x) {\n    return this.f(acc, x);\n  };\n\n  return function _xwrap(fn) { return new XWrap(fn); };\n}());\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_xwrap.js\n **/","var _arity = require('./internal/_arity');\nvar _curry2 = require('./internal/_curry2');\n\n\n/**\n * Creates a function that is bound to a context.\n * Note: `R.bind` does not provide the additional argument-binding capabilities of\n * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n *\n * @func\n * @memberOf R\n * @since v0.6.0\n * @category Function\n * @category Object\n * @see R.partial\n * @sig (* -> *) -> {*} -> (* -> *)\n * @param {Function} fn The function to bind to context\n * @param {Object} thisObj The context to bind `fn` to\n * @return {Function} A function that will execute in the context of `thisObj`.\n */\nmodule.exports = _curry2(function bind(fn, thisObj) {\n  return _arity(fn.length, function() {\n    return fn.apply(thisObj, arguments);\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/bind.js\n **/","module.exports = function _arity(n, fn) {\n  // jshint unused:vars\n  switch (n) {\n    case 0: return function() { return fn.apply(this, arguments); };\n    case 1: return function(a0) { return fn.apply(this, arguments); };\n    case 2: return function(a0, a1) { return fn.apply(this, arguments); };\n    case 3: return function(a0, a1, a2) { return fn.apply(this, arguments); };\n    case 4: return function(a0, a1, a2, a3) { return fn.apply(this, arguments); };\n    case 5: return function(a0, a1, a2, a3, a4) { return fn.apply(this, arguments); };\n    case 6: return function(a0, a1, a2, a3, a4, a5) { return fn.apply(this, arguments); };\n    case 7: return function(a0, a1, a2, a3, a4, a5, a6) { return fn.apply(this, arguments); };\n    case 8: return function(a0, a1, a2, a3, a4, a5, a6, a7) { return fn.apply(this, arguments); };\n    case 9: return function(a0, a1, a2, a3, a4, a5, a6, a7, a8) { return fn.apply(this, arguments); };\n    case 10: return function(a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) { return fn.apply(this, arguments); };\n    default: throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_arity.js\n **/","var _curry1 = require('./internal/_curry1');\nvar _isArray = require('./internal/_isArray');\n\n\n/**\n * Tests whether or not an object is similar to an array.\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Type\n * @category List\n * @sig * -> Boolean\n * @param {*} x The object to test.\n * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.\n * @example\n *\n *      R.isArrayLike([]); //=> true\n *      R.isArrayLike(true); //=> false\n *      R.isArrayLike({}); //=> false\n *      R.isArrayLike({length: 10}); //=> false\n *      R.isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true\n */\nmodule.exports = _curry1(function isArrayLike(x) {\n  if (_isArray(x)) { return true; }\n  if (!x) { return false; }\n  if (typeof x !== 'object') { return false; }\n  if (x instanceof String) { return false; }\n  if (x.nodeType === 1) { return !!x.length; }\n  if (x.length === 0) { return true; }\n  if (x.length > 0) {\n    return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);\n  }\n  return false;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/isArrayLike.js\n **/","/**\n * Tests whether or not an object is an array.\n *\n * @private\n * @param {*} val The object to test.\n * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n * @example\n *\n *      _isArray([]); //=> true\n *      _isArray(null); //=> false\n *      _isArray({}); //=> false\n */\nmodule.exports = Array.isArray || function _isArray(val) {\n  return (val != null &&\n          val.length >= 0 &&\n          Object.prototype.toString.call(val) === '[object Array]');\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_isArray.js\n **/","var _curry1 = require('./internal/_curry1');\nvar _has = require('./internal/_has');\n\n\n/**\n * Returns a list containing the names of all the enumerable own\n * properties of the supplied object.\n * Note that the order of the output array is not guaranteed to be\n * consistent across different JS platforms.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {k: v} -> [k]\n * @param {Object} obj The object to extract properties from\n * @return {Array} An array of the object's own properties.\n * @example\n *\n *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\n */\nmodule.exports = (function() {\n  // cover IE < 9 keys issues\n  var hasEnumBug = !({toString: null}).propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['constructor', 'valueOf', 'isPrototypeOf', 'toString',\n                            'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  var contains = function contains(list, item) {\n    var idx = 0;\n    while (idx < list.length) {\n      if (list[idx] === item) {\n        return true;\n      }\n      idx += 1;\n    }\n    return false;\n  };\n\n  return typeof Object.keys === 'function' ?\n    _curry1(function keys(obj) {\n      return Object(obj) !== obj ? [] : Object.keys(obj);\n    }) :\n    _curry1(function keys(obj) {\n      if (Object(obj) !== obj) {\n        return [];\n      }\n      var prop, ks = [], nIdx;\n      for (prop in obj) {\n        if (_has(prop, obj)) {\n          ks[ks.length] = prop;\n        }\n      }\n      if (hasEnumBug) {\n        nIdx = nonEnumerableProps.length - 1;\n        while (nIdx >= 0) {\n          prop = nonEnumerableProps[nIdx];\n          if (_has(prop, obj) && !contains(ks, prop)) {\n            ks[ks.length] = prop;\n          }\n          nIdx -= 1;\n        }\n      }\n      return ks;\n    });\n}());\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/keys.js\n **/","module.exports = function _has(prop, obj) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_has.js\n **/","var _curry2 = require('./internal/_curry2');\nvar _dispatchable = require('./internal/_dispatchable');\nvar _map = require('./internal/_map');\nvar _reduce = require('./internal/_reduce');\nvar _xmap = require('./internal/_xmap');\nvar curryN = require('./curryN');\nvar keys = require('./keys');\n\n\n/**\n * Returns a new list, constructed by applying the supplied function to every element of the\n * supplied list.\n *\n * Note: `R.map` does not skip deleted or unassigned indices (sparse arrays), unlike the\n * native `Array.prototype.map` method. For more details on this behavior, see:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map#Description\n *\n * Dispatches to the `map` method of the second argument, if present.\n *\n * Acts as a transducer if a transformer is given in list position.\n * @see R.transduce\n *\n * Map treats also treats functions as functors and will compose them together.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig Functor f => (a -> b) -> f a -> f b\n * @param {Function} fn The function to be called on every element of the input `list`.\n * @param {Array} list The list to be iterated over.\n * @return {Array} The new list.\n * @example\n *\n *      var double = x => x * 2;\n *\n *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]\n *\n *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}\n */\nmodule.exports = _curry2(_dispatchable('map', _xmap, function map(fn, functor) {\n  switch (Object.prototype.toString.call(functor)) {\n    case '[object Function]':\n      return curryN(functor.length, function() {\n        return fn.call(this, functor.apply(this, arguments));\n      });\n    case '[object Object]':\n      return _reduce(function(acc, key) {\n        acc[key] = fn(functor[key]);\n        return acc;\n      }, {}, keys(functor));\n    default:\n      return _map(fn, functor);\n  }\n}));\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/map.js\n **/","var _isArray = require('./_isArray');\nvar _isTransformer = require('./_isTransformer');\nvar _slice = require('./_slice');\n\n\n/**\n * Returns a function that dispatches with different strategies based on the\n * object in list position (last argument). If it is an array, executes [fn].\n * Otherwise, if it has a  function with [methodname], it will execute that\n * function (functor case). Otherwise, if it is a transformer, uses transducer\n * [xf] to return a new transformer (transducer case). Otherwise, it will\n * default to executing [fn].\n *\n * @private\n * @param {String} methodname property to check for a custom implementation\n * @param {Function} xf transducer to initialize if object is transformer\n * @param {Function} fn default ramda implementation\n * @return {Function} A function that dispatches on object in list position\n */\nmodule.exports = function _dispatchable(methodname, xf, fn) {\n  return function() {\n    var length = arguments.length;\n    if (length === 0) {\n      return fn();\n    }\n    var obj = arguments[length - 1];\n    if (!_isArray(obj)) {\n      var args = _slice(arguments, 0, length - 1);\n      if (typeof obj[methodname] === 'function') {\n        return obj[methodname].apply(obj, args);\n      }\n      if (_isTransformer(obj)) {\n        var transducer = xf.apply(null, args);\n        return transducer(obj);\n      }\n    }\n    return fn.apply(this, arguments);\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_dispatchable.js\n **/","module.exports = function _isTransformer(obj) {\n  return typeof obj['@@transducer/step'] === 'function';\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_isTransformer.js\n **/","/**\n * An optimized, private array `slice` implementation.\n *\n * @private\n * @param {Arguments|Array} args The array or arguments object to consider.\n * @param {Number} [from=0] The array index to slice from, inclusive.\n * @param {Number} [to=args.length] The array index to slice to, exclusive.\n * @return {Array} A new, sliced array.\n * @example\n *\n *      _slice([1, 2, 3, 4, 5], 1, 3); //=> [2, 3]\n *\n *      var firstThreeArgs = function(a, b, c, d) {\n *        return _slice(arguments, 0, 3);\n *      };\n *      firstThreeArgs(1, 2, 3, 4); //=> [1, 2, 3]\n */\nmodule.exports = function _slice(args, from, to) {\n  switch (arguments.length) {\n    case 1: return _slice(args, 0, args.length);\n    case 2: return _slice(args, from, args.length);\n    default:\n      var list = [];\n      var idx = 0;\n      var len = Math.max(0, Math.min(args.length, to) - from);\n      while (idx < len) {\n        list[idx] = args[from + idx];\n        idx += 1;\n      }\n      return list;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_slice.js\n **/","module.exports = function _map(fn, functor) {\n  var idx = 0;\n  var len = functor.length;\n  var result = Array(len);\n  while (idx < len) {\n    result[idx] = fn(functor[idx]);\n    idx += 1;\n  }\n  return result;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_map.js\n **/","var _curry2 = require('./_curry2');\nvar _xfBase = require('./_xfBase');\n\n\nmodule.exports = (function() {\n  function XMap(f, xf) {\n    this.xf = xf;\n    this.f = f;\n  }\n  XMap.prototype['@@transducer/init'] = _xfBase.init;\n  XMap.prototype['@@transducer/result'] = _xfBase.result;\n  XMap.prototype['@@transducer/step'] = function(result, input) {\n    return this.xf['@@transducer/step'](result, this.f(input));\n  };\n\n  return _curry2(function _xmap(f, xf) { return new XMap(f, xf); });\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_xmap.js\n **/","module.exports = {\n  init: function() {\n    return this.xf['@@transducer/init']();\n  },\n  result: function(result) {\n    return this.xf['@@transducer/result'](result);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_xfBase.js\n **/","var _arity = require('./internal/_arity');\nvar _curry1 = require('./internal/_curry1');\nvar _curry2 = require('./internal/_curry2');\nvar _curryN = require('./internal/_curryN');\n\n\n/**\n * Returns a curried equivalent of the provided function, with the\n * specified arity. The curried function has two unusual capabilities.\n * First, its arguments needn't be provided one at a time. If `g` is\n * `R.curryN(3, f)`, the following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value `R.__` may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is `R.__`,\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.5.0\n * @category Function\n * @sig Number -> (* -> a) -> (* -> a)\n * @param {Number} length The arity for the returned function.\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curry\n * @example\n *\n *      var sumArgs = (...args) => R.sum(args);\n *\n *      var curriedAddFourNumbers = R.curryN(4, sumArgs);\n *      var f = curriedAddFourNumbers(1, 2);\n *      var g = f(3);\n *      g(4); //=> 10\n */\nmodule.exports = _curry2(function curryN(length, fn) {\n  if (length === 1) {\n    return _curry1(fn);\n  }\n  return _arity(length, _curryN(length, [], fn));\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/curryN.js\n **/","var _arity = require('./_arity');\n\n\n/**\n * Internal curryN function.\n *\n * @private\n * @category Function\n * @param {Number} length The arity of the curried function.\n * @return {array} An array of arguments received thus far.\n * @param {Function} fn The function to curry.\n */\nmodule.exports = function _curryN(length, received, fn) {\n  return function() {\n    var combined = [];\n    var argsIdx = 0;\n    var left = length;\n    var combinedIdx = 0;\n    while (combinedIdx < received.length || argsIdx < arguments.length) {\n      var result;\n      if (combinedIdx < received.length &&\n          (received[combinedIdx] == null ||\n           received[combinedIdx]['@@functional/placeholder'] !== true ||\n           argsIdx >= arguments.length)) {\n        result = received[combinedIdx];\n      } else {\n        result = arguments[argsIdx];\n        argsIdx += 1;\n      }\n      combined[combinedIdx] = result;\n      if (result == null || result['@@functional/placeholder'] !== true) {\n        left -= 1;\n      }\n      combinedIdx += 1;\n    }\n    return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_curryN.js\n **/","var _curry2 = require('./internal/_curry2');\nvar keys = require('./keys');\n\n\n/**\n * Create a new object with the own properties of `a`\n * merged with the own properties of object `b`.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {k: v} -> {k: v} -> {k: v}\n * @param {Object} a\n * @param {Object} b\n * @return {Object}\n * @example\n *\n *      R.merge({ 'name': 'fred', 'age': 10 }, { 'age': 40 });\n *      //=> { 'name': 'fred', 'age': 40 }\n *\n *      var resetToDefault = R.merge(R.__, {x: 0});\n *      resetToDefault({x: 5, y: 2}); //=> {x: 0, y: 2}\n */\nmodule.exports = _curry2(function merge(a, b) {\n  var result = {};\n  var ks = keys(a);\n  var idx = 0;\n  while (idx < ks.length) {\n    result[ks[idx]] = a[ks[idx]];\n    idx += 1;\n  }\n  ks = keys(b);\n  idx = 0;\n  while (idx < ks.length) {\n    result[ks[idx]] = b[ks[idx]];\n    idx += 1;\n  }\n  return result;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/merge.js\n **/","var _curry2 = require('./internal/_curry2');\nvar _equals = require('./internal/_equals');\n\n\n/**\n * Returns `true` if its arguments are equivalent, `false` otherwise.\n * Dispatches to an `equals` method if present. Handles cyclical data\n * structures.\n *\n * Dispatches to the `equals` method of both arguments, if present.\n *\n * @func\n * @memberOf R\n * @since v0.15.0\n * @category Relation\n * @sig a -> b -> Boolean\n * @param {*} a\n * @param {*} b\n * @return {Boolean}\n * @example\n *\n *      R.equals(1, 1); //=> true\n *      R.equals(1, '1'); //=> false\n *      R.equals([1, 2, 3], [1, 2, 3]); //=> true\n *\n *      var a = {}; a.v = a;\n *      var b = {}; b.v = b;\n *      R.equals(a, b); //=> true\n */\nmodule.exports = _curry2(function equals(a, b) {\n  return _equals(a, b, [], []);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/equals.js\n **/","var _arrayFromIterator = require('./_arrayFromIterator');\nvar _has = require('./_has');\nvar identical = require('../identical');\nvar keys = require('../keys');\nvar type = require('../type');\n\n\nmodule.exports = function _equals(a, b, stackA, stackB) {\n  if (identical(a, b)) {\n    return true;\n  }\n\n  if (type(a) !== type(b)) {\n    return false;\n  }\n\n  if (a == null || b == null) {\n    return false;\n  }\n\n  if (typeof a.equals === 'function' || typeof b.equals === 'function') {\n    return typeof a.equals === 'function' && a.equals(b) &&\n           typeof b.equals === 'function' && b.equals(a);\n  }\n\n  switch (type(a)) {\n    case 'Arguments':\n    case 'Array':\n    case 'Object':\n      break;\n    case 'Boolean':\n    case 'Number':\n    case 'String':\n      if (!(typeof a === typeof b && identical(a.valueOf(), b.valueOf()))) {\n        return false;\n      }\n      break;\n    case 'Date':\n      if (!identical(a.valueOf(), b.valueOf())) {\n        return false;\n      }\n      break;\n    case 'RegExp':\n      if (!(a.source === b.source &&\n            a.global === b.global &&\n            a.ignoreCase === b.ignoreCase &&\n            a.multiline === b.multiline &&\n            a.sticky === b.sticky &&\n            a.unicode === b.unicode)) {\n        return false;\n      }\n      break;\n    case 'Map':\n    case 'Set':\n      if (!_equals(_arrayFromIterator(a.entries()), _arrayFromIterator(b.entries()), stackA, stackB)) {\n        return false;\n      }\n      break;\n    case 'Int8Array':\n    case 'Uint8Array':\n    case 'Uint8ClampedArray':\n    case 'Int16Array':\n    case 'Uint16Array':\n    case 'Int32Array':\n    case 'Uint32Array':\n    case 'Float32Array':\n    case 'Float64Array':\n      break;\n    case 'ArrayBuffer':\n      break;\n    default:\n      // Values of other types are only equal if identical.\n      return false;\n  }\n\n  var keysA = keys(a);\n  if (keysA.length !== keys(b).length) {\n    return false;\n  }\n\n  var idx = stackA.length - 1;\n  while (idx >= 0) {\n    if (stackA[idx] === a) {\n      return stackB[idx] === b;\n    }\n    idx -= 1;\n  }\n\n  stackA.push(a);\n  stackB.push(b);\n  idx = keysA.length - 1;\n  while (idx >= 0) {\n    var key = keysA[idx];\n    if (!(_has(key, b) && _equals(b[key], a[key], stackA, stackB))) {\n      return false;\n    }\n    idx -= 1;\n  }\n  stackA.pop();\n  stackB.pop();\n  return true;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_equals.js\n **/","module.exports = function _arrayFromIterator(iter) {\n  var list = [];\n  var next;\n  while (!(next = iter.next()).done) {\n    list.push(next.value);\n  }\n  return list;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_arrayFromIterator.js\n **/","var _curry2 = require('./internal/_curry2');\n\n\n/**\n * Returns true if its arguments are identical, false otherwise. Values are\n * identical if they reference the same memory. `NaN` is identical to `NaN`;\n * `0` and `-0` are not identical.\n *\n * @func\n * @memberOf R\n * @since v0.15.0\n * @category Relation\n * @sig a -> a -> Boolean\n * @param {*} a\n * @param {*} b\n * @return {Boolean}\n * @example\n *\n *      var o = {};\n *      R.identical(o, o); //=> true\n *      R.identical(1, 1); //=> true\n *      R.identical(1, '1'); //=> false\n *      R.identical([], []); //=> false\n *      R.identical(0, -0); //=> false\n *      R.identical(NaN, NaN); //=> true\n */\nmodule.exports = _curry2(function identical(a, b) {\n  // SameValue algorithm\n  if (a === b) { // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    return a !== 0 || 1 / a === 1 / b;\n  } else {\n    // Step 6.a: NaN == NaN\n    return a !== a && b !== b;\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/identical.js\n **/","const R = {\n  T: require('ramda/src/T'),\n  evolve: require('ramda/src/evolve'),\n  not: require('ramda/src/not'),\n  always: require('ramda/src/always'),\n  F: require('ramda/src/F'),\n  inc: require('ramda/src/inc'),\n  ifElse: require('ramda/src/ifElse'),\n  update: require('ramda/src/update'),\n  append: require('ramda/src/append'),\n  mapObjIndexed: require('ramda/src/mapObjIndexed'),\n}\nconst h = require('snabbdom/h')\nconst F = {...require('../core'), ...require('../utils/helpers')}\nconst {logAction, displayFromDiff, diff} = require('../utils/logdiff')\n\n\nlet timetravel = (child, log = true) => {\n\n  return F.def({\n    init: () => ({\n      time: 0,\n      active: true,\n      playing: false,\n      frameTime: 0,\n      opened: false,\n      state: child.init(),\n      history: [{ state: child.init(), timestamp: (new Date()).getTime() }],\n    }),\n    // inputs\n    inputs: {\n      toggleTimeTravel: (ctx, Action, _) => ctx.action$(Action.ToggleTimeTravel()),\n      setTime: (ctx, Action, time) => ctx.action$(Action.SetTime(time)),\n      childAction: (ctx, Action, a) => ctx.action$(Action.ChildAction(a)),\n      setActive: (ctx, Action, bool) => ctx.action$(Action.SetActive(bool)),\n      clearHistory: (ctx, Action, _) => ctx.action$(Action.ClearHistory()),\n      play: (ctx, Action, playing) => ctx.action$(Action.Play(playing)),\n      frame: (ctx, Action, _) => ctx.action$(Action.Frame()),\n    },\n    load: (ctx, i, Action) => {\n      return {\n        child: F.createContext(child, {action$: (m.active) ? i.childAction : a => {\n          if (log) {\n            logAction(a)\n          }\n        }}),\n      }\n    },\n    Action: {\n      ToggleTimeTravel: [],\n      Frame: [],\n      Play: [R.T],\n      SetActive: [R.T],\n      SetTime: [Number],\n      ClearHistory: [],\n      ChildAction: [Array],\n    },\n    update: {\n      ToggleTimeTravel: R.evolve({opened: R.not}),\n      SetActive: (bool, m) => R.evolve({active: R.always(bool)}, m),\n      SetTime: (time, m) => {\n        let validTime = time\n        if (time >= m.history.length)\n          validTime = m.history.length - 1\n        else if (time < 0)\n          validTime = 0\n        let nextState = m.history[validTime].state\n        if (log) {\n          displayFromDiff(diff(m.state, nextState))\n          console.log(nextState)\n        }\n        return R.evolve({\n          active: R.F,\n          state: R.always(nextState),\n          time: R.always(validTime),\n        }, m)\n      },\n      ClearHistory: m => {\n        let step = R.evolve({timestamp: R.always((new Date()).getTime())}, m.history[m.time])\n        return R.evolve({\n          time: R.always(0),\n          state: R.always(step.state),\n          history: R.always([step]),\n        }, m)\n      },\n      ChildAction: (action, m) => {\n        let evolveFn = R.evolve({\n          state: child.update(action),\n          timestamp: R.always((new Date()).getTime())\n        }, m.history[m.time])\n        if (log) {\n          logAction(action)\n          displayFromDiff(diff(m.state, evolveFn.state))\n          console.log(evolveFn.state)\n        }\n        let newModel = R.evolve({\n          time: R.inc,\n          state: R.always(evolveFn.state),\n          history: R.ifElse(\n            h => !!h[m.time + 1], // exist that registry in history?\n            R.update(m.time + 1, evolveFn), // rescribe history\n            R.append(evolveFn) // create history\n          )\n        }, m)\n        if (newModel.history.length == 2) { // casse for large time witout an update\n          newModel.history[0].timestamp = newModel.history[1].timestamp\n        }\n        return newModel\n      },\n\n      Play: (playing, m) => {\n        if (playing) {\n          if (m.time != m.history.length - 1)\n            return R.evolve({\n              active: R.F,\n              playing: R.T,\n              frameTime: R.always(m.history[m.time + 1].timestamp - m.history[m.time].timestamp),\n            }, m)\n          else\n            return R.evolve({\n              active: R.F,\n              playing: R.F,\n            }, m)\n        } else {\n          return R.evolve({\n            active: R.F,\n            playing: R.F,\n          }, m)\n        }\n      },\n      Frame: m => {\n        if (m.time != m.history.length - 1) {\n          let frameTime = (m.time < m.history.length - 2) ? R.always(m.history[m.time + 2].timestamp - m.history[m.time + 1].timestamp) : R.always(0)\n          let nextState = m.history[m.time + 1].state\n          if (log) {\n            displayFromDiff(diff(m.state, nextState))\n            console.log(nextState)\n          }\n          return R.evolve({\n            active: R.F,\n            time: R.inc,\n            playing: frameTime >= 0,\n            state: R.always(nextState),\n            frameTime,\n          }, m)\n        } else\n          return R.evolve({\n            active: R.F,\n            playing: R.F,\n          }, m)\n      }\n    },\n    interfaces: {\n      view: (ctx, i, m) => { // inputs, outputs and model\n        return h('div', {style: {\n            width: '100%',\n            height: '100%',\n            overflow: 'auto',\n          } }, [\n          ctx._md.child.interfaces.view(m.history[m.time].state),\n          h('button', {\n            style: styles.toggleButton,\n            on: {click: i.toggleTimeTravel}\n          }, 'tt'),\n          h('footer', {style: {...styles.base, display: (m.opened) ? 'flex' : 'none'}}, [\n            h('div', {style: styles.controls}, [\n              h('button', {style: styles.button, on: {click: () => i.setTime(m.time - 1)}}, 'Back'),\n              h('button', {style: styles.button, on: {click: () => i.setTime(m.time + 1)}}, 'Forward'),\n              h('button', {style: styles.button, on: {click: () => i.setActive(!m.active)}}, (m.active) ? 'Pause' : 'Unpause'),\n              h('button', {style: styles.button, on: {click: () => i.clearHistory(undefined)}}, 'Clear history'),\n              h('button', {style: styles.button, on: {click: () => i.play(!m.playing)}}, (m.playing) ? 'Pause replay' : 'Replay'),\n              h('span', {style: styles.time}, m.time),\n            ]),\n            h('input', {\n              style: styles.slider,\n              props: {type: 'range', max: m.history.length - 1, min: 0, value: m.time},\n              on: {\n                input: ev => i.setTime(parseInt(ev.target.value)),\n              },\n            })\n          ]),\n        ])\n      },\n      // TODO: update this interface mergers\n      time: (ctx, i, m) => {\n        return {\n          timer: {\n            periodic: false,\n            active: m.playing,\n            time: m.frameTime,\n            on: i.frame,\n          },\n          ...(() => { // mergin child interfaces\n            let timers = {}\n            if (child.interfaces.time) {\n              R.mapObjIndexed((obj, name) => {\n                timers['child' + name] = obj\n                if (!m.active)\n                  timers['child' + name].active = false\n              }, ctx._md.child.interfaces.time(m.history[m.time].state))\n            }\n            return timers\n          })()\n        }\n      },\n      fetch: (ctx, i, m) => {\n        return {\n          ...(() => { // mergin child interfaces\n            let fetches = {}\n            if (child.interfaces.fetch) {\n              R.mapObjIndexed((obj, name) => {\n                fetches['child' + name] = obj\n                if (!m.active)\n                  fetches['child' + name].active = false\n              }, ctx._md.child.interfaces.fetch(m.history[m.time].state))\n            }\n            return fetches\n          })()\n        }\n      },\n    },\n\n  })\n}\n\nexport default timetravel\n\nconst styles = {\n  base: {\n    position: 'fixed',\n    width: '100%',\n    minHeight: '100px',\n    bottom: '0px',\n    display: 'flex',\n    'flex-direction': 'column',\n    'justify-content': 'center',\n    'align-items': 'center',\n    zIndex: '99999',\n  },\n  toggleButton: {\n    position: 'fixed',\n    bottom: '0px',\n    left: '0px',\n    zIndex: '10000',\n  },\n  controls: {\n    width: '100%',\n    minHeight: '30px',\n    'margin-bottom': '5px',\n    display: 'flex',\n    flexWrap: 'wrap',\n    'justify-content': 'space-around',\n  },\n  time: {\n    float: 'right',\n  },\n  slider: {\n    width: '90%',\n  },\n}\n\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/modules/timetravel.js\n **/","var always = require('./always');\n\n\n/**\n * A function that always returns `true`. Any passed in parameters are ignored.\n *\n * @func\n * @memberOf R\n * @since v0.9.0\n * @category Function\n * @sig * -> Boolean\n * @param {*}\n * @return {Boolean}\n * @see R.always, R.F\n * @example\n *\n *      R.T(); //=> true\n */\nmodule.exports = always(true);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/T.js\n **/","var _curry1 = require('./internal/_curry1');\n\n\n/**\n * Returns a function that always returns the given value. Note that for\n * non-primitives the value returned is a reference to the original value.\n *\n * This function is known as `const`, `constant`, or `K` (for K combinator)\n * in other languages and libraries.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig a -> (* -> a)\n * @param {*} val The value to wrap in a function\n * @return {Function} A Function :: * -> val.\n * @example\n *\n *      var t = R.always('Tee');\n *      t(); //=> 'Tee'\n */\nmodule.exports = _curry1(function always(val) {\n  return function() {\n    return val;\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/always.js\n **/","var _curry2 = require('./internal/_curry2');\n\n\n/**\n * Creates a new object by recursively evolving a shallow copy of `object`, according to the\n * `transformation` functions. All non-primitive properties are copied by reference.\n *\n * A `transformation` function will not be invoked if its corresponding key does not exist in\n * the evolved object.\n *\n * @func\n * @memberOf R\n * @since v0.9.0\n * @category Object\n * @sig {k: (v -> v)} -> {k: v} -> {k: v}\n * @param {Object} transformations The object specifying transformation functions to apply\n *        to the object.\n * @param {Object} object The object to be transformed.\n * @return {Object} The transformed object.\n * @example\n *\n *      var tomato  = {firstName: '  Tomato ', data: {elapsed: 100, remaining: 1400}, id:123};\n *      var transformations = {\n *        firstName: R.trim,\n *        lastName: R.trim, // Will not get invoked.\n *        data: {elapsed: R.add(1), remaining: R.add(-1)}\n *      };\n *      R.evolve(transformations, tomato); //=> {firstName: 'Tomato', data: {elapsed: 101, remaining: 1399}, id:123}\n */\nmodule.exports = _curry2(function evolve(transformations, object) {\n  var transformation, key, type, result = {};\n  for (key in object) {\n    transformation = transformations[key];\n    type = typeof transformation;\n    result[key] = type === 'function' ? transformation(object[key])\n                : type === 'object'   ? evolve(transformations[key], object[key])\n                                      : object[key];\n  }\n  return result;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/evolve.js\n **/","var _curry1 = require('./internal/_curry1');\n\n\n/**\n * A function that returns the `!` of its argument. It will return `true` when\n * passed false-y value, and `false` when passed a truth-y one.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Logic\n * @sig * -> Boolean\n * @param {*} a any value\n * @return {Boolean} the logical inverse of passed argument.\n * @see R.complement\n * @example\n *\n *      R.not(true); //=> false\n *      R.not(false); //=> true\n *      R.not(0); => true\n *      R.not(1); => false\n */\nmodule.exports = _curry1(function not(a) {\n  return !a;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/not.js\n **/","var always = require('./always');\n\n\n/**\n * A function that always returns `false`. Any passed in parameters are ignored.\n *\n * @func\n * @memberOf R\n * @since v0.9.0\n * @category Function\n * @sig * -> Boolean\n * @param {*}\n * @return {Boolean}\n * @see R.always, R.T\n * @example\n *\n *      R.F(); //=> false\n */\nmodule.exports = always(false);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/F.js\n **/","var add = require('./add');\n\n\n/**\n * Increments its argument.\n *\n * @func\n * @memberOf R\n * @since v0.9.0\n * @category Math\n * @sig Number -> Number\n * @param {Number} n\n * @return {Number}\n * @see R.dec\n * @example\n *\n *      R.inc(42); //=> 43\n */\nmodule.exports = add(1);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/inc.js\n **/","var _curry2 = require('./internal/_curry2');\n\n\n/**\n * Adds two numbers. Equivalent to `a + b` but curried.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Math\n * @sig Number -> Number -> Number\n * @param {Number} a\n * @param {Number} b\n * @return {Number}\n * @see R.subtract\n * @example\n *\n *      R.add(2, 3);       //=>  5\n *      R.add(7)(10);      //=> 17\n */\nmodule.exports = _curry2(function add(a, b) { return a + b; });\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/add.js\n **/","var _curry3 = require('./internal/_curry3');\nvar curryN = require('./curryN');\n\n\n/**\n * Creates a function that will process either the `onTrue` or the `onFalse` function depending\n * upon the result of the `condition` predicate.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Logic\n * @see R.unless, R.when\n * @sig (*... -> Boolean) -> (*... -> *) -> (*... -> *) -> (*... -> *)\n * @param {Function} condition A predicate function\n * @param {Function} onTrue A function to invoke when the `condition` evaluates to a truthy value.\n * @param {Function} onFalse A function to invoke when the `condition` evaluates to a falsy value.\n * @return {Function} A new unary function that will process either the `onTrue` or the `onFalse`\n *                    function depending upon the result of the `condition` predicate.\n * @example\n *\n *      var incCount = R.ifElse(\n *        R.has('count'),\n *        R.over(R.lensProp('count'), R.inc),\n *        R.assoc('count', 1)\n *      );\n *      incCount({});           //=> { count: 1 }\n *      incCount({ count: 1 }); //=> { count: 2 }\n */\nmodule.exports = _curry3(function ifElse(condition, onTrue, onFalse) {\n  return curryN(Math.max(condition.length, onTrue.length, onFalse.length),\n    function _ifElse() {\n      return condition.apply(this, arguments) ? onTrue.apply(this, arguments) : onFalse.apply(this, arguments);\n    }\n  );\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/ifElse.js\n **/","var _curry1 = require('./_curry1');\nvar _curry2 = require('./_curry2');\n\n\n/**\n * Optimized internal three-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */\nmodule.exports = function _curry3(fn) {\n  return function f3(a, b, c) {\n    var n = arguments.length;\n    if (n === 0) {\n      return f3;\n    } else if (n === 1 && a != null && a['@@functional/placeholder'] === true) {\n      return f3;\n    } else if (n === 1) {\n      return _curry2(function(b, c) { return fn(a, b, c); });\n    } else if (n === 2 && a != null && a['@@functional/placeholder'] === true &&\n                          b != null && b['@@functional/placeholder'] === true) {\n      return f3;\n    } else if (n === 2 && a != null && a['@@functional/placeholder'] === true) {\n      return _curry2(function(a, c) { return fn(a, b, c); });\n    } else if (n === 2 && b != null && b['@@functional/placeholder'] === true) {\n      return _curry2(function(b, c) { return fn(a, b, c); });\n    } else if (n === 2) {\n      return _curry1(function(c) { return fn(a, b, c); });\n    } else if (n === 3 && a != null && a['@@functional/placeholder'] === true &&\n                          b != null && b['@@functional/placeholder'] === true &&\n                          c != null && c['@@functional/placeholder'] === true) {\n      return f3;\n    } else if (n === 3 && a != null && a['@@functional/placeholder'] === true &&\n                          b != null && b['@@functional/placeholder'] === true) {\n      return _curry2(function(a, b) { return fn(a, b, c); });\n    } else if (n === 3 && a != null && a['@@functional/placeholder'] === true &&\n                          c != null && c['@@functional/placeholder'] === true) {\n      return _curry2(function(a, c) { return fn(a, b, c); });\n    } else if (n === 3 && b != null && b['@@functional/placeholder'] === true &&\n                          c != null && c['@@functional/placeholder'] === true) {\n      return _curry2(function(b, c) { return fn(a, b, c); });\n    } else if (n === 3 && a != null && a['@@functional/placeholder'] === true) {\n      return _curry1(function(a) { return fn(a, b, c); });\n    } else if (n === 3 && b != null && b['@@functional/placeholder'] === true) {\n      return _curry1(function(b) { return fn(a, b, c); });\n    } else if (n === 3 && c != null && c['@@functional/placeholder'] === true) {\n      return _curry1(function(c) { return fn(a, b, c); });\n    } else {\n      return fn(a, b, c);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_curry3.js\n **/","var _curry3 = require('./internal/_curry3');\nvar adjust = require('./adjust');\nvar always = require('./always');\n\n\n/**\n * Returns a new copy of the array with the element at the\n * provided index replaced with the given value.\n * @see R.adjust\n *\n * @func\n * @memberOf R\n * @since v0.14.0\n * @category List\n * @sig Number -> a -> [a] -> [a]\n * @param {Number} idx The index to update.\n * @param {*} x The value to exist at the given index of the returned array.\n * @param {Array|Arguments} list The source array-like object to be updated.\n * @return {Array} A copy of `list` with the value at index `idx` replaced with `x`.\n * @example\n *\n *      R.update(1, 11, [0, 1, 2]);     //=> [0, 11, 2]\n *      R.update(1)(11)([0, 1, 2]);     //=> [0, 11, 2]\n */\nmodule.exports = _curry3(function update(idx, x, list) {\n  return adjust(always(x), idx, list);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/update.js\n **/","var _concat = require('./internal/_concat');\nvar _curry3 = require('./internal/_curry3');\n\n\n/**\n * Applies a function to the value at the given index of an array,\n * returning a new copy of the array with the element at the given\n * index replaced with the result of the function application.\n * @see R.update\n *\n * @func\n * @memberOf R\n * @since v0.14.0\n * @category List\n * @sig (a -> a) -> Number -> [a] -> [a]\n * @param {Function} fn The function to apply.\n * @param {Number} idx The index.\n * @param {Array|Arguments} list An array-like object whose value\n *        at the supplied index will be replaced.\n * @return {Array} A copy of the supplied array-like object with\n *         the element at index `idx` replaced with the value\n *         returned by applying `fn` to the existing element.\n * @example\n *\n *      R.adjust(R.add(10), 1, [0, 1, 2]);     //=> [0, 11, 2]\n *      R.adjust(R.add(10))(1)([0, 1, 2]);     //=> [0, 11, 2]\n */\nmodule.exports = _curry3(function adjust(fn, idx, list) {\n  if (idx >= list.length || idx < -list.length) {\n    return list;\n  }\n  var start = idx < 0 ? list.length : 0;\n  var _idx = start + idx;\n  var _list = _concat(list);\n  _list[_idx] = fn(list[_idx]);\n  return _list;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/adjust.js\n **/","/**\n * Private `concat` function to merge two array-like objects.\n *\n * @private\n * @param {Array|Arguments} [set1=[]] An array-like object.\n * @param {Array|Arguments} [set2=[]] An array-like object.\n * @return {Array} A new, merged array.\n * @example\n *\n *      _concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]\n */\nmodule.exports = function _concat(set1, set2) {\n  set1 = set1 || [];\n  set2 = set2 || [];\n  var idx;\n  var len1 = set1.length;\n  var len2 = set2.length;\n  var result = [];\n\n  idx = 0;\n  while (idx < len1) {\n    result[result.length] = set1[idx];\n    idx += 1;\n  }\n  idx = 0;\n  while (idx < len2) {\n    result[result.length] = set2[idx];\n    idx += 1;\n  }\n  return result;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_concat.js\n **/","var _concat = require('./internal/_concat');\nvar _curry2 = require('./internal/_curry2');\n\n\n/**\n * Returns a new list containing the contents of the given list, followed by the given\n * element.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig a -> [a] -> [a]\n * @param {*} el The element to add to the end of the new list.\n * @param {Array} list The list whose contents will be added to the beginning of the output\n *        list.\n * @return {Array} A new list containing the contents of the old list followed by `el`.\n * @see R.prepend\n * @example\n *\n *      R.append('tests', ['write', 'more']); //=> ['write', 'more', 'tests']\n *      R.append('tests', []); //=> ['tests']\n *      R.append(['tests'], ['write', 'more']); //=> ['write', 'more', ['tests']]\n */\nmodule.exports = _curry2(function append(el, list) {\n  return _concat(list, [el]);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/append.js\n **/","var VNode = require('./vnode');\nvar is = require('./is');\n\nfunction addNS(data, children) {\n  data.ns = 'http://www.w3.org/2000/svg';\n  if (children !== undefined) {\n    for (var i = 0; i < children.length; ++i) {\n      addNS(children[i].data, children[i].children);\n    }\n  }\n}\n\nmodule.exports = function h(sel, b, c) {\n  var data = {}, children, text, i;\n  if (arguments.length === 3) {\n    data = b;\n    if (is.array(c)) { children = c; }\n    else if (is.primitive(c)) { text = c; }\n  } else if (arguments.length === 2) {\n    if (is.array(b)) { children = b; }\n    else if (is.primitive(b)) { text = b; }\n    else { data = b; }\n  }\n  if (is.array(children)) {\n    for (i = 0; i < children.length; ++i) {\n      if (is.primitive(children[i])) children[i] = VNode(undefined, undefined, undefined, children[i]);\n    }\n  }\n  if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g') {\n    addNS(data, children);\n  }\n  return VNode(sel, data, children, text, undefined);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/h.js\n **/","module.exports = function(sel, data, children, text, elm) {\n  var key = data === undefined ? undefined : data.key;\n  return {sel: sel, data: data, children: children,\n          text: text, elm: elm, key: key};\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/vnode.js\n **/","module.exports = {\n  array: Array.isArray,\n  primitive: function(s) { return typeof s === 'string' || typeof s === 'number'; },\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/is.js\n **/","var _arity = require('./internal/_arity');\nvar _pipe = require('./internal/_pipe');\nvar reduce = require('./reduce');\nvar tail = require('./tail');\n\n\n/**\n * Performs left-to-right function composition. The leftmost function may have\n * any arity; the remaining functions must be unary.\n *\n * In some libraries this function is named `sequence`.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)\n * @param {...Function} functions\n * @return {Function}\n * @see R.compose\n * @example\n *\n *      var f = R.pipe(Math.pow, R.negate, R.inc);\n *\n *      f(3, 4); // -(3^4) + 1\n */\nmodule.exports = function pipe() {\n  if (arguments.length === 0) {\n    throw new Error('pipe requires at least one argument');\n  }\n  return _arity(arguments[0].length,\n                reduce(_pipe, arguments[0], tail(arguments)));\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/pipe.js\n **/","module.exports = function _pipe(f, g) {\n  return function() {\n    return g.call(this, f.apply(this, arguments));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_pipe.js\n **/","var _curry3 = require('./internal/_curry3');\nvar _reduce = require('./internal/_reduce');\n\n\n/**\n * Returns a single item by iterating through the list, successively calling the iterator\n * function and passing it an accumulator value and the current value from the array, and\n * then passing the result to the next call.\n *\n * The iterator function receives two values: *(acc, value)*.  It may use `R.reduced` to\n * shortcut the iteration.\n *\n * Note: `R.reduce` does not skip deleted or unassigned indices (sparse arrays), unlike\n * the native `Array.prototype.reduce` method. For more details on this behavior, see:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\n * @see R.reduced\n *\n * Dispatches to the `reduce` method of the third argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @sig (a,b -> a) -> a -> [b] -> a\n * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n *        current element from the array.\n * @param {*} acc The accumulator value.\n * @param {Array} list The list to iterate over.\n * @return {*} The final, accumulated value.\n * @example\n *\n *      var numbers = [1, 2, 3];\n *      var add = (a, b) => a + b;\n *\n *      R.reduce(add, 10, numbers); //=> 16\n */\nmodule.exports = _curry3(_reduce);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/reduce.js\n **/","var _checkForMethod = require('./internal/_checkForMethod');\nvar slice = require('./slice');\n\n\n/**\n * Returns all but the first element of the given list or string (or object\n * with a `tail` method).\n *\n * Dispatches to the `slice` method of the first argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category List\n * @see R.head, R.init, R.last\n * @sig [a] -> [a]\n * @sig String -> String\n * @param {*} list\n * @return {*}\n * @example\n *\n *      R.tail([1, 2, 3]);  //=> [2, 3]\n *      R.tail([1, 2]);     //=> [2]\n *      R.tail([1]);        //=> []\n *      R.tail([]);         //=> []\n *\n *      R.tail('abc');  //=> 'bc'\n *      R.tail('ab');   //=> 'b'\n *      R.tail('a');    //=> ''\n *      R.tail('');     //=> ''\n */\nmodule.exports = _checkForMethod('tail', slice(1, Infinity));\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/tail.js\n **/","var _isArray = require('./_isArray');\nvar _slice = require('./_slice');\n\n\n/**\n * Similar to hasMethod, this checks whether a function has a [methodname]\n * function. If it isn't an array it will execute that function otherwise it will\n * default to the ramda implementation.\n *\n * @private\n * @param {Function} fn ramda implemtation\n * @param {String} methodname property to check for a custom implementation\n * @return {Object} Whatever the return value of the method is.\n */\nmodule.exports = function _checkForMethod(methodname, fn) {\n  return function() {\n    var length = arguments.length;\n    if (length === 0) {\n      return fn();\n    }\n    var obj = arguments[length - 1];\n    return (_isArray(obj) || typeof obj[methodname] !== 'function') ?\n      fn.apply(this, arguments) :\n      obj[methodname].apply(obj, _slice(arguments, 0, length - 1));\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/internal/_checkForMethod.js\n **/","var _checkForMethod = require('./internal/_checkForMethod');\nvar _curry3 = require('./internal/_curry3');\n\n\n/**\n * Returns the elements of the given list or string (or object with a `slice`\n * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).\n *\n * Dispatches to the `slice` method of the third argument, if present.\n *\n * @func\n * @memberOf R\n * @since v0.1.4\n * @category List\n * @sig Number -> Number -> [a] -> [a]\n * @sig Number -> Number -> String -> String\n * @param {Number} fromIndex The start index (inclusive).\n * @param {Number} toIndex The end index (exclusive).\n * @param {*} list\n * @return {*}\n * @example\n *\n *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']\n *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']\n *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']\n *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']\n *      R.slice(0, 3, 'ramda');                     //=> 'ram'\n */\nmodule.exports = _curry3(_checkForMethod('slice', function slice(fromIndex, toIndex, list) {\n  return Array.prototype.slice.call(list, fromIndex, toIndex);\n}));\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/slice.js\n **/","// abstractions for a service\nconst F = {\n  data: require('./utils/data'),\n}\nconst R = {\n  curry: require('ramda/src/curry'),\n}\n\n// serverName, store, events, init, connect\nexport default function service(defObj) {\n\n  let isQueued = !!defObj.queue\n\n  let log = defObj.hasOwnProperty('log') || true\n\n  let serverName = defObj.serverName\n  let store = defObj.store\n  let eventQueue = []\n\n  // data is a proxy for store that automatically notify changes\n  let data = new Proxy(store, {\n    set: function(target, name, value) {\n      target[name] = value\n      notify(name)\n      return true\n    },\n  })\n\n\n  let subscribers = -1\n\n  let events = defObj.events(data)\n  function emit(name, value, cbObj) {\n    if (events[name]) {\n      if (data.connected || !isQueued) {\n        events[name](value, cbObj)\n      } else {\n        eventQueue.push({name, value, cbObj})\n      }\n    } else if (log) {\n      console.warn(`There are no event handler for ${name} in this service`)\n    }\n  }\n  let init = R.curry(defObj.init)(data, emit)\n  defObj.connect = R.curry(defObj.connect)(data, emit)\n\n  function notify(name) {\n    for (var subscriber in subscribers) {\n      let parts = subscriber.split('_')\n      if (parts[parts.length - 1] === name) {\n        subscribers[subscriber](data[name])\n      }\n    }\n  }\n\n  function notifyAll() {\n    for (var subscriber in subscribers) {\n      if (data[subscriber]) {\n        subscribers[subscriber](data[subscriber])\n      }\n    }\n  }\n\n  function subscribeAll(subs) {\n    // avoid a bug with flyd.on TODO: needs review\n    if (subs != undefined) {\n      if (subscribers == -1 && data.state == 'updated') {\n        // notify all incoming subscribers in the rare case\n        // that data has updated before subscribers are recolected\n        subscribers = subs\n        notifyAll()\n      } else {\n        subscribers = subs\n      }\n    }\n  }\n\n  // merge tasks and drivers to store\n  if (defObj.tasks) {\n    defObj.tasks = defObj.tasks(emit)\n    store._tasks = defObj.tasks\n  }\n  if (defObj.drivers) {\n    defObj.drivers = defObj.drivers(emit, subscribeAll)\n    store._drivers = defObj.drivers\n  }\n\n  return {\n    serverName,\n    get: function(key) {\n      return data[key]\n    },\n    emit,\n    connect: function(connectionInfo) {\n      function success() {\n        let promises = []\n        let ev\n        while (ev = eventQueue.pop()) {\n          promises.push(new Promise(function(resolve, reject) {\n            events[ev.name](ev.value, resolve, reject)\n          }))\n        }\n        // TODO: handle errors\n        Promise.all(promises)\n          .then(() => init(() => 0, () => 0))\n      }\n\n      defObj.connect(connectionInfo, (isQueued) ? success : init(() => 0, () => 0))\n    },\n    tasks: defObj.tasks,\n    drivers: defObj.drivers,\n    subscribeAll,\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/service.js\n **/","\n// common fetch utils\n\nconst fetchObj = obj => {\n  let handled = false\n  let status = (response) => {\n    if (response.status >= 200 && response.status < 300) {\n      handled = true\n      return Promise.resolve(response)\n    } else {\n      if (response.status == 401 || response.status == 403) {\n        obj.error('denied', response.status)\n      } else {\n        obj.error('error', response.status)\n      }\n      handled = true\n      return Promise.reject(new Error(response.statusText))\n    }\n  }\n\n  return fetch(obj.url, obj.options)\n  .then(status)\n  .then(obj.response)\n  .then(obj.success)\n  .catch(err => {\n    if (!handled)\n      obj.error('netError', err)\n  })\n}\n\nconst fetchAll = (objs, success) => {\n\n  let promiseArray = objs.map((obj, i) => {\n    let handled = false\n    let status = (response) => {\n      if (response.status >= 200 && response.status < 300) {\n        handled = true\n        return Promise.resolve(response)\n      } else {\n        if (response.status == 401 || response.status == 403) {\n          obj.error('denied', response.status)\n        } else {\n          obj.error('error', response.status)\n        }\n        handled = true\n        return Promise.reject(new Error(response.statusText))\n      }\n    }\n\n    return fetch(obj.url, obj.options)\n      .then(status)\n      .then(obj.response)\n  })\n\n  return Promise.all(promiseArray)\n  .then(success)\n}\n\nexport default {\n  fetch: fetchObj,\n  fetchAll,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils/data.js\n **/","var _curry1 = require('./internal/_curry1');\nvar curryN = require('./curryN');\n\n\n/**\n * Returns a curried equivalent of the provided function. The curried\n * function has two unusual capabilities. First, its arguments needn't\n * be provided one at a time. If `f` is a ternary function and `g` is\n * `R.curry(f)`, the following are equivalent:\n *\n *   - `g(1)(2)(3)`\n *   - `g(1)(2, 3)`\n *   - `g(1, 2)(3)`\n *   - `g(1, 2, 3)`\n *\n * Secondly, the special placeholder value `R.__` may be used to specify\n * \"gaps\", allowing partial application of any combination of arguments,\n * regardless of their positions. If `g` is as above and `_` is `R.__`,\n * the following are equivalent:\n *\n *   - `g(1, 2, 3)`\n *   - `g(_, 2, 3)(1)`\n *   - `g(_, _, 3)(1)(2)`\n *   - `g(_, _, 3)(1, 2)`\n *   - `g(_, 2)(1)(3)`\n *   - `g(_, 2)(1, 3)`\n *   - `g(_, 2)(_, 3)(1)`\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Function\n * @sig (* -> a) -> (* -> a)\n * @param {Function} fn The function to curry.\n * @return {Function} A new, curried function.\n * @see R.curryN\n * @example\n *\n *      var addFourNumbers = (a, b, c, d) => a + b + c + d;\n *\n *      var curriedAddFourNumbers = R.curry(addFourNumbers);\n *      var f = curriedAddFourNumbers(1, 2);\n *      var g = f(3);\n *      g(4); //=> 10\n */\nmodule.exports = _curry1(function curry(fn) {\n  return curryN(fn.length, fn);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/ramda/src/curry.js\n **/","const F = {...require('../core').default, ...require('../utils/helpers').default}\nconst h = require('snabbdom/h')\n\n\nexport default F.def({\n  init: ({key}) => ({key}),\n  inputs: {},\n  actions: {},\n  interfaces: {\n    view: (ctx, i, m) => h('div', 'There are no children'),\n  },\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/modules/noChildren.js\n **/","let Type = require('union-type')\nlet R = {\n  T: require('ramda/src/T')\n}\n\n\nexport default {\n  types: Type({\n    emit: [String, R.T, R.T],\n  }),\n  task: function(emitData) {\n    let taskFn = this.types.caseOn({\n      emit: (key, value, {success = () => 0, error = () => 0}) => {\n        emitData(key, value, {success, error})\n      },\n    })\n\n    // task runner\n    return {\n      run: function(task) {\n        // perform side effect\n        taskFn(task, '')\n      },\n      get: {},\n    }\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/tasks/data.js\n **/","let Type = require('union-type')\nlet R = {\n  T: require('ramda/src/T')\n}\n\n\nexport default {\n  types: Type({\n    send: [String],\n  }),\n  task: function(sendValue) {\n    let taskFn = this.types.caseOn({\n      send: (value) => {\n        sendValue(value)\n      },\n    })\n\n    // task runner\n    return {\n      run: function(task) {\n        // perform side effect\n        taskFn(task, '')\n      },\n      get: {},\n    }\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/tasks/value.js\n **/","import Type from 'union-type'\nimport data from '../utils/data'\nconst R = {\n  T: require('ramda/src/T')\n}\n\n\nexport default {\n  types: Type({\n    fetch: [Object],\n  }),\n  task: function() {\n    let taskFn = this.types.caseOn({\n      fetch: (obj) => data.fetch(obj),\n    })\n\n    // task runner\n    return {\n      run: function(obj) {\n        // perform side effect\n        return taskFn(obj, '')\n      },\n      get: {},\n    }\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/tasks/fetch.js\n **/","let Type = require('union-type')\nlet R = {\n  T: require('ramda/src/T')\n}\n\n// emitter should implement emit function\nexport default {\n  types: Type({\n    emit: [String, R.T, R.T],\n  }),\n  task: function(emt) {\n    let emitter = emt\n    let taskFn = this.types.caseOn({\n      emit: (channel, message, success = () => {}) => {\n        if (emitter != undefined) {\n          emitter.emit(channel, message, success)\n        }\n      },\n    })\n    // task runner\n    return {\n      run: function(task) {\n        // perform side effect\n        taskFn(task, '')\n      },\n      get: emitter,\n      set: function(emt) {emitter = emt},\n    }\n  },\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/tasks/emitter.js\n **/","\nconst flyd = require('flyd')\nconst h = require('snabbdom/h')\n\n// Common snabbdom patch function (convention over configuration)\nconst patch = require('snabbdom').init([\n  require('snabbdom/modules/class'),\n  require('snabbdom/modules/attributes'),\n  require('snabbdom/modules/props'),\n  require('snabbdom/modules/eventlisteners'),\n  require('snabbdom/modules/style'),\n])\n\nexport default function view(selector, patchfn = patch) {\n  let lastContainer, renderer$\n  return {\n    attach: (vnode$) => {\n      window.addEventListener('DOMContentLoaded', function() {\n        let container = document.querySelector(selector)\n        renderer$ = flyd.scan(patchfn, container, vnode$.map(vnode => h('div' + selector, [vnode])))\n      })\n    },\n    reattach: (vnode$) => {\n      lastContainer = patchfn(document.querySelector(selector), h('div' + selector))\n      renderer$ = flyd.scan(patchfn, lastContainer, vnode$.map(vnode => h('div' + selector, [vnode])))\n    },\n    dispose: () => {\n      renderer$.end(true)\n    },\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/drivers/view.js\n **/","// jshint newcap: false\n/* global require, module, document, Element */\n'use strict';\n\nvar VNode = require('./vnode');\nvar is = require('./is');\n\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\n\nfunction emptyNodeAt(elm) {\n  return VNode(elm.tagName, {}, [], undefined, elm);\n}\n\nvar emptyNode = VNode('', {}, [], undefined, undefined);\n\nfunction sameVnode(vnode1, vnode2) {\n  return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\n\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n  var i, map = {}, key;\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) map[key] = i;\n  }\n  return map;\n}\n\nfunction createRmCb(childElm, listeners) {\n  return function() {\n    if (--listeners === 0) childElm.parentElement.removeChild(childElm);\n  };\n}\n\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\n\nfunction init(modules) {\n  var i, j, cbs = {};\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (modules[j][hooks[i]] !== undefined) cbs[hooks[i]].push(modules[j][hooks[i]]);\n    }\n  }\n\n  function createElm(vnode, insertedVnodeQueue) {\n    var i, data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) i(vnode);\n      if (isDef(i = data.vnode)) vnode = i;\n    }\n    var elm, children = vnode.children, sel = vnode.sel;\n    if (isDef(sel)) {\n      // Parse selector\n      var hashIdx = sel.indexOf('#');\n      var dotIdx = sel.indexOf('.', hashIdx);\n      var hash = hashIdx > 0 ? hashIdx : sel.length;\n      var dot = dotIdx > 0 ? dotIdx : sel.length;\n      var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n      elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? document.createElementNS(i, tag)\n                                                          : document.createElement(tag);\n      if (hash < dot) elm.id = sel.slice(hash + 1, dot);\n      if (dotIdx > 0) elm.className = sel.slice(dot+1).replace(/\\./g, ' ');\n      if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n          elm.appendChild(createElm(children[i], insertedVnodeQueue));\n        }\n      } else if (is.primitive(vnode.text)) {\n        elm.appendChild(document.createTextNode(vnode.text));\n      }\n      for (i = 0; i < cbs.create.length; ++i) cbs.create[i](emptyNode, vnode);\n      i = vnode.data.hook; // Reuse variable\n      if (isDef(i)) {\n        if (i.create) i.create(emptyNode, vnode);\n        if (i.insert) insertedVnodeQueue.push(vnode);\n      }\n    } else {\n      elm = vnode.elm = document.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n  }\n\n  function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      parentElm.insertBefore(createElm(vnodes[startIdx], insertedVnodeQueue), before);\n    }\n  }\n\n  function invokeDestroyHook(vnode) {\n    var i = vnode.data, j;\n    if (isDef(i)) {\n      if (isDef(i = i.hook) && isDef(i = i.destroy)) i(vnode);\n      for (i = 0; i < cbs.destroy.length; ++i) cbs.destroy[i](vnode);\n      if (isDef(i = vnode.children)) {\n        for (j = 0; j < vnode.children.length; ++j) {\n          invokeDestroyHook(vnode.children[j]);\n        }\n      }\n    }\n  }\n\n  function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var i, listeners, rm, ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.sel)) {\n          invokeDestroyHook(ch);\n          listeners = cbs.remove.length + 1;\n          rm = createRmCb(ch.elm, listeners);\n          for (i = 0; i < cbs.remove.length; ++i) cbs.remove[i](ch, rm);\n          if (isDef(i = ch.data) && isDef(i = i.hook) && isDef(i = i.remove)) {\n            i(ch, rm);\n          } else {\n            rm();\n          }\n        } else { // Text node\n          parentElm.removeChild(ch.elm);\n        }\n      }\n    }\n  }\n\n  function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n    var oldStartIdx = 0, newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, elmToMove, before;\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n        parentElm.insertBefore(oldStartVnode.elm, oldEndVnode.elm.nextSibling);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n        parentElm.insertBefore(oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n        idxInOld = oldKeyToIdx[newStartVnode.key];\n        if (isUndef(idxInOld)) { // New element\n          parentElm.insertBefore(createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        } else {\n          elmToMove = oldCh[idxInOld];\n          patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n          oldCh[idxInOld] = undefined;\n          parentElm.insertBefore(elmToMove.elm, oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        }\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      before = isUndef(newCh[newEndIdx+1]) ? null : newCh[newEndIdx+1].elm;\n      addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n    var i, hook;\n    if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n      i(oldVnode, vnode);\n    }\n    if (isDef(i = oldVnode.data) && isDef(i = i.vnode)) oldVnode = i;\n    if (isDef(i = vnode.data) && isDef(i = i.vnode)) vnode = i;\n    var elm = vnode.elm = oldVnode.elm, oldCh = oldVnode.children, ch = vnode.children;\n    if (oldVnode === vnode) return;\n    if (isDef(vnode.data)) {\n      for (i = 0; i < cbs.update.length; ++i) cbs.update[i](oldVnode, vnode);\n      i = vnode.data.hook;\n      if (isDef(i) && isDef(i = i.update)) i(oldVnode, vnode);\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n      } else if (isDef(ch)) {\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      elm.textContent = vnode.text;\n    }\n    if (isDef(hook) && isDef(i = hook.postpatch)) {\n      i(oldVnode, vnode);\n    }\n  }\n\n  return function(oldVnode, vnode) {\n    var i;\n    var insertedVnodeQueue = [];\n    for (i = 0; i < cbs.pre.length; ++i) cbs.pre[i]();\n    if (oldVnode instanceof Element) {\n      if (oldVnode.parentElement !== null) {\n        createElm(vnode, insertedVnodeQueue);\n        oldVnode.parentElement.replaceChild(vnode.elm, oldVnode);\n      } else {\n        oldVnode = emptyNodeAt(oldVnode);\n        patchVnode(oldVnode, vnode, insertedVnodeQueue);\n      }\n    } else {\n      patchVnode(oldVnode, vnode, insertedVnodeQueue);\n    }\n    for (i = 0; i < insertedVnodeQueue.length; ++i) {\n      insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n    }\n    for (i = 0; i < cbs.post.length; ++i) cbs.post[i]();\n    return vnode;\n  };\n}\n\nmodule.exports = {init: init};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/snabbdom.js\n **/","function updateClass(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldClass = oldVnode.data.class || {},\n      klass = vnode.data.class || {};\n  for (name in klass) {\n    cur = klass[name];\n    if (cur !== oldClass[name]) {\n      elm.classList[cur ? 'add' : 'remove'](name);\n    }\n  }\n}\n\nmodule.exports = {create: updateClass, update: updateClass};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/modules/class.js\n **/","var booleanAttrs = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"compact\", \"controls\", \"declare\", \n                \"default\", \"defaultchecked\", \"defaultmuted\", \"defaultselected\", \"defer\", \"disabled\", \"draggable\", \n                \"enabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"inert\", \"ismap\", \"itemscope\", \"loop\", \"multiple\", \n                \"muted\", \"nohref\", \"noresize\", \"noshade\", \"novalidate\", \"nowrap\", \"open\", \"pauseonexit\", \"readonly\", \n                \"required\", \"reversed\", \"scoped\", \"seamless\", \"selected\", \"sortable\", \"spellcheck\", \"translate\", \n                \"truespeed\", \"typemustmatch\", \"visible\"];\n    \nvar booleanAttrsDict = {};\nfor(var i=0, len = booleanAttrs.length; i < len; i++) {\n  booleanAttrsDict[booleanAttrs[i]] = true;\n}\n    \nfunction updateAttrs(oldVnode, vnode) {\n  var key, cur, old, elm = vnode.elm,\n      oldAttrs = oldVnode.data.attrs || {}, attrs = vnode.data.attrs || {};\n  \n  // update modified attributes, add new attributes\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      // TODO: add support to namespaced attributes (setAttributeNS)\n      if(!cur && booleanAttrsDict[key])\n        elm.removeAttribute(key);\n      else\n        elm.setAttribute(key, cur);\n    }\n  }\n  //remove removed attributes\n  // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n  // the other option is to remove all attributes with value == undefined\n  for (key in oldAttrs) {\n    if (!(key in attrs)) {\n      elm.removeAttribute(key);\n    }\n  }\n}\n\nmodule.exports = {create: updateAttrs, update: updateAttrs};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/modules/attributes.js\n **/","function updateProps(oldVnode, vnode) {\n  var key, cur, old, elm = vnode.elm,\n      oldProps = oldVnode.data.props || {}, props = vnode.data.props || {};\n  for (key in props) {\n    cur = props[key];\n    old = oldProps[key];\n    if (old !== cur) {\n      elm[key] = cur;\n    }\n  }\n}\n\nmodule.exports = {create: updateProps, update: updateProps};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/modules/props.js\n **/","var is = require('../is');\n\nfunction arrInvoker(arr) {\n  return function() {\n    // Special case when length is two, for performance\n    arr.length === 2 ? arr[0](arr[1]) : arr[0].apply(undefined, arr.slice(1));\n  };\n}\n\nfunction fnInvoker(o) {\n  return function(ev) { o.fn(ev); };\n}\n\nfunction updateEventListeners(oldVnode, vnode) {\n  var name, cur, old, elm = vnode.elm,\n      oldOn = oldVnode.data.on || {}, on = vnode.data.on;\n  if (!on) return;\n  for (name in on) {\n    cur = on[name];\n    old = oldOn[name];\n    if (old === undefined) {\n      if (is.array(cur)) {\n        elm.addEventListener(name, arrInvoker(cur));\n      } else {\n        cur = {fn: cur};\n        on[name] = cur;\n        elm.addEventListener(name, fnInvoker(cur));\n      }\n    } else if (is.array(old)) {\n      // Deliberately modify old array since it's captured in closure created with `arrInvoker`\n      old.length = cur.length;\n      for (var i = 0; i < old.length; ++i) old[i] = cur[i];\n      on[name]  = old;\n    } else {\n      old.fn = cur;\n      on[name] = old;\n    }\n  }\n}\n\nmodule.exports = {create: updateEventListeners, update: updateEventListeners};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/modules/eventlisteners.js\n **/","var raf = requestAnimationFrame || setTimeout;\nvar nextFrame = function(fn) { raf(function() { raf(fn); }); };\n\nfunction setNextFrame(obj, prop, val) {\n  nextFrame(function() { obj[prop] = val; });\n}\n\nfunction updateStyle(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldStyle = oldVnode.data.style || {},\n      style = vnode.data.style || {},\n      oldHasDel = 'delayed' in oldStyle;\n  for (name in style) {\n    cur = style[name];\n    if (name === 'delayed') {\n      for (name in style.delayed) {\n        cur = style.delayed[name];\n        if (!oldHasDel || cur !== oldStyle.delayed[name]) {\n          setNextFrame(elm.style, name, cur);\n        }\n      }\n    } else if (name !== 'remove' && cur !== oldStyle[name]) {\n      elm.style[name] = cur;\n    }\n  }\n}\n\nfunction applyDestroyStyle(vnode) {\n  var style, name, elm = vnode.elm, s = vnode.data.style;\n  if (!s || !(style = s.destroy)) return;\n  for (name in style) {\n    elm.style[name] = style[name];\n  }\n}\n\nfunction applyRemoveStyle(vnode, rm) {\n  var s = vnode.data.style;\n  if (!s || !s.remove) {\n    rm();\n    return;\n  }\n  var name, elm = vnode.elm, idx, i = 0, maxDur = 0,\n      compStyle, style = s.remove, amount = 0, applied = [];\n  for (name in style) {\n    applied.push(name);\n    elm.style[name] = style[name];\n  }\n  compStyle = getComputedStyle(elm);\n  var props = compStyle['transition-property'].split(', ');\n  for (; i < props.length; ++i) {\n    if(applied.indexOf(props[i]) !== -1) amount++;\n  }\n  elm.addEventListener('transitionend', function(ev) {\n    if (ev.target === elm) --amount;\n    if (amount === 0) rm();\n  });\n}\n\nmodule.exports = {create: updateStyle, update: updateStyle, destroy: applyDestroyStyle, remove: applyRemoveStyle};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/snabbdom/modules/style.js\n **/","const flyd = require('flyd')\n\n\nexport default function event(cb) {\n  return {\n    listener$: null,\n    attach: function (event$) {\n      this.listener$ = flyd.on(cb, event$)\n    },\n    reattach: function (event$) {\n      this.listener$ = flyd.on(cb, event$)\n    },\n    dispose: function () {\n      this.listener$.end(true)\n    },\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/drivers/event.js\n **/","// WORKING\nconst flyd = require('flyd')\n\n// l should implement removeAllListeners and on functions\nexport default function listenable(l) {\n\n  let listenable = l || {}\n\n  /* In the form: {\n    listenerName1: [listenerFn1, listenerFn2, ...],\n    listenerName2: [listenerFn1, listenerFn2, ...],\n  }\n  */\n  let listeners\n\n  if (!listenable.removeAllListeners) {\n    listenable.removeAllListeners = () => {}\n  }\n\n  function setSubscribers(subs) {\n\n    listeners = {}\n\n    for (let subscriber in subs) {\n      let parts = subscriber.split('_')\n      let name = parts[parts.length - 1]\n      if (listeners[name]) {\n        listeners[name].push(subs[subscriber])\n      } else {\n        listeners[name] = [subs[subscriber]]\n      }\n    }\n\n    setListeners()\n  }\n\n  function setListeners() {\n    for (let listenerName in listeners) {\n      let listenerArr = listeners[listenerName]\n      if (listenerArr.length > 0 && listenable != undefined) {\n        listenable.removeAllListeners(listenerName)\n        for (let i = listenerArr.length - 1; i >= 0; i--) {\n          listenable.on(listenerName, listenerArr[i])\n        }\n      }\n    }\n  }\n\n  return {\n    listener$: null,\n    attach: function (event$) {\n      this.listener$ = flyd.on(setSubscribers, event$)\n    },\n    reattach: function (event$) {\n      this.listener$ = flyd.on(setSubscribers, event$)\n    },\n    dispose: function () {\n      this.listener$.end(true)\n    },\n    get: function() {return listenable},\n    set: function(s) {\n      listenable = s\n      setListeners()\n    },\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/drivers/listenable.js\n **/","\nconst flyd = require('flyd')\n\nexport default function load() {\n  return {\n    attach: (vnode$) => {\n      flyd.on(f => {\n      \tf()\n      \tvnode$.end(true)\n      }, vnode$)\n    },\n    reattach: (vnode$) => {\n    },\n    dispose: () => {\n    },\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/drivers/load.js\n **/","const R = {\n  mapObjIndexed: require('ramda/src/mapObjIndexed'),\n}\nconst flyd = require('flyd')\n\n\n//// time driver module ----\nlet stateNames = ['pending', 'running', 'paused']\nlet timerPatch = (timeData, obj) => {\n  // TODO: Do a better implementation of this driver\n  let id = timeData.id\n  if (obj.periodic) {\n    if (obj.active && obj.active != timeData.active) {\n      id = setInterval(() => obj.on(timeData), obj.time)\n    } else if (!obj.active && obj.active != timeData.active) {\n      clearInterval(id)\n      id = null\n    } else if (obj.time != timeData.time) {\n      clearInterval(id)\n      id = setInterval(() => obj.on(timeData), obj.time)\n    } else if (id && obj.periodic != timeData.periodic) {\n      clearTimeout(id)\n      id = setInterval(() => obj.on(timeData), obj.time)\n    }\n  } else {\n    if (obj.active && obj.active != timeData.active) {\n      id = setTimeout(() => obj.on(timeData), obj.time)\n    } else if (!obj.active && obj.active != timeData.active) {\n      clearTimeout(id)\n      id = null\n    } else if (obj.time != timeData.time) {\n      clearTimeout(id)\n      id = setTimeout(() => obj.on(timeData), obj.time)\n    } else if (obj.periodic != timeData.periodic) {\n      clearInterval(id)\n      id = setTimeout(() => obj.on(timeData), obj.time)\n    }\n  }\n  return {\n    id,\n    periodic: obj.periodic,\n    active: obj.active,\n    time: obj.time,\n    on: obj.on,\n    state: obj.state,\n  }\n}\n\nlet timerListPatch = (lastList, list) => {\n  // dispose removed timers\n  for (var name in lastList) {\n    if (!list[name]) {\n      if (lastList[name].periodic)\n        clearInterval(lastList[name].id)\n      else\n        clearTimeout(lastList[name].id)\n    }\n  }\n\n  return R.mapObjIndexed((obj, name) => timerPatch(lastList[name] || {}, obj), list)\n}\n\nexport default function time() {\n  // babel or JS bug the stack is deleted and listener$ in not accesible from attach\n  // solution use normal functions (not arrows) and merge listener$ in the object\n  // let listener$\n  return {\n    listener$: null,\n    attach: function (time$) {\n      this.listener$ = flyd.scan(timerListPatch, {}, time$)\n    },\n    reattach: function (time$) {\n      this.listener$ = flyd.scan(timerListPatch, {}, time$)\n    },\n    dispose: function () {\n      this.listener$.end(true)\n    },\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/drivers/time.js\n **/","const flyd = require('flyd')\n\nexport default function localStorage(name) {\n  let listener$\n  return {\n    attach: (data$) => {\n      listener$ = flyd.on(data => {\n      \tlocalStorage.setItem(name, JSON.stringify(data))\n      }, data$)\n    },\n    reattach: (data$) => {\n      listener$.end(true)\n      listener$ = flyd.on(data => {\n        localStorage.setItem(name, JSON.stringify(data))\n      }, data$)\n    },\n    dispose: () => {\n      localStorage.removeItem(name)\n      listener$.end(true)\n    },\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/drivers/localStorage.js\n **/","const flyd = require('flyd')\nconst {screenInfo} = require('../../lib/utils/screenInfo')\n\n// difing is not necesary beacuse there is no use case in that the screen size has a bunch of changes\nexport default function screenInfoDriver() {\n  return {\n    listener$: null,\n    screenListener: null,\n    attach: function (screen$) {\n      this.listener$ = flyd.on(list => {\n        this.screenListener = () => {\n          let info = screenInfo()\n          for (let key in list) {\n            list[key].on(info)\n          }\n        }\n        window.addEventListener('resize', this.screenListener)\n      }, screen$)\n    },\n    reattach: function (screen$) {\n      this.listener$ = flyd.on(list => {\n        this.screenListener = () => {\n          let info = screenInfo()\n          for (let key in list) {\n            list[key].on(info)\n          }\n        }\n        window.addEventListener('resize', this.screenListener)\n      }, screen$)\n    },\n    dispose: function () {\n      this.listener$.end(true)\n      window.removeEventListener('resize', this.screenListener)\n      this.screenListener = null\n    },\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/drivers/screenInfo.js\n **/","// Helper functions taken from https://github.com/garth/snabbdom-material/tree/master/src/helpers\n\nlet screenSize = () => {\n  return {\n    width: (!!window && (window.innerWidth || document.body.clientWidth)) || 1024,\n    height: (!!window && (window.innerHeight || document.body.clientHeight)) || 768\n  }\n}\n\nconst types = [ 'xs', 'sm', 'md', 'lg' ]\n\nlet screenInfo = () => {\n  const { width, height } = screenSize()\n  const size = width >= 1200 ? 4 : width >= 992 ? 3 : width >= 768 ? 2 : 1\n\n  return {\n    size,\n    type: types[size - 1],\n    isLandscape: width >= height,\n    isPortrait: width < height\n  }\n}\n\nexport default {\n  screenSize,\n  screenInfo,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/utils/screenInfo.js\n **/"],"sourceRoot":""}